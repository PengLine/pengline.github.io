<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>剧本分镜智能体架构设计与实现（MVP版） | 余一叶知秋尽</title><meta name="author" content="余一叶知秋尽"><meta name="copyright" content="余一叶知秋尽"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="该工具将自然语言剧本自动拆分为多个N秒长度的短视频片段脚本，以适用于 AI 视频生成模型，可直接用于“文生视频”。">
<meta property="og:type" content="article">
<meta property="og:title" content="剧本分镜智能体架构设计与实现（MVP版）">
<meta property="og:url" content="https://pengline.github.io/2025/10/0194020a663c408fb500dd7532349519/index.html">
<meta property="og:site_name" content="余一叶知秋尽">
<meta property="og:description" content="该工具将自然语言剧本自动拆分为多个N秒长度的短视频片段脚本，以适用于 AI 视频生成模型，可直接用于“文生视频”。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pengline.github.io/img/essay/1755143991957175514399123.webp">
<meta property="article:published_time" content="2025-10-28T16:00:00.000Z">
<meta property="article:modified_time" content="2026-02-28T03:39:17.986Z">
<meta property="article:author" content="余一叶知秋尽">
<meta property="article:tag" content="LangGraph流程编排">
<meta property="article:tag" content="长剧本拆分">
<meta property="article:tag" content="长剧本分镜">
<meta property="article:tag" content="长剧本视频生成">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pengline.github.io/img/essay/1755143991957175514399123.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "剧本分镜智能体架构设计与实现（MVP版）",
  "url": "https://pengline.github.io/2025/10/0194020a663c408fb500dd7532349519/",
  "image": "https://pengline.github.io/img/essay/1755143991957175514399123.webp",
  "datePublished": "2025-10-28T16:00:00.000Z",
  "dateModified": "2026-02-28T03:39:17.986Z",
  "author": [
    {
      "@type": "Person",
      "name": "余一叶知秋尽",
      "url": "https://pengline.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://pengline.github.io/2025/10/0194020a663c408fb500dd7532349519/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":30,"languages":{"author":"作者: 余一叶知秋尽","link":"链接: ","source":"来源: 余一叶知秋尽","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '剧本分镜智能体架构设计与实现（MVP版）',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/font.css"><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="余一叶知秋尽" type="application/atom+xml">
</head><body><div id="web_bg" style="background: LightGray;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "/img/20241215205335173426721579192.webp" data-lazy-src="/img/butterfly-icon.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">243</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">41</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list-ul"></i><span> 归档</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类别</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签集</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-outdent"></i><span> AI</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/ai/aigc/"><i class="fa-fw fas fa-cubes"></i><span> AIGC 创意平台</span></a></li><li><a class="site-page child" href="https://github.com/HengLine/video-shot-agent"><i class="fa-fw fas fa-file-video"></i><span> 剧本分镜Agent</span></a></li><li><a class="site-page child" href="/ai/agent/video/"><i class="fa-fw fas fa-cut"></i><span> 视频混剪Agent</span></a></li><li><a class="site-page child" href="/ai/agent/medical/"><i class="fa-fw fas fa-medkit"></i><span> 医疗问答Agent</span></a></li><li><a class="site-page child" href="https://github.com/HengLine/ai-stocks-agent"><i class="fa-fw fas fa-line-chart"></i><span> 股票分析Agent</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list-ol"></i><span> 项目</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/turnkey/smart-city"><i class="fa-fw fas fa-building"></i><span> 智慧城市（IOT）</span></a></li><li><a class="site-page child" href="/turnkey/smart-security"><i class="fa-fw fas fa-check-circle"></i><span> 智慧安检（IOT）</span></a></li><li><a class="site-page child" href="/turnkey/tms"><i class="fa-fw fas fa-truck"></i><span> 物流运输（TMS）</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-cogs"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tools/json/"><i class="fa-fw fas fa-cog"></i><span> JSON 转换工具集</span></a></li><li><a class="site-page child" href="/tools/diagrams/mermaid"><i class="fa-fw fas fa-pie-chart"></i><span> Mermaid 绘制 UML</span></a></li><li><a class="site-page child" href="/tools/image/compressor/"><i class="fa-fw fas fa-image"></i><span> 图像批量压缩大小</span></a></li><li><a class="site-page child" href="/tools/image/watermark/"><i class="fa-fw fas fa-image"></i><span> 图像批量添加水印</span></a></li><li><a class="site-page child" href="/tools/image/convert/"><i class="fa-fw fas fa-file-image"></i><span> 图像格式编码转换</span></a></li><li><a class="site-page child" href="/tools/video/cropping/"><i class="fa-fw fas fa-cut"></i><span> 视频时长范围裁剪</span></a></li><li><a class="site-page child" href="/tools/video/watermark/"><i class="fa-fw fas fa-video"></i><span> 视频加水印马赛克</span></a></li><li><a class="site-page child" href="/tools/download/"><i class="fa-fw fas fa-cloud-download"></i><span> 批量下载视频图片</span></a></li><li><a class="site-page child" href="/tools/docu/watermark/"><i class="fa-fw fas fa-file-pdf"></i><span> PDF 添加文字水印</span></a></li><li><a class="site-page child" href="/tools/docu/signature"><i class="fa-fw fas fa-file"></i><span> 文档在线手写签名</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-pencil-square"></i><span> 文学</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/literature/poems"><i class="fa-fw fas fa-align-center"></i><span> 三行诗集</span></a></li><li><a class="site-page child" href="/literature/classical"><i class="fa-fw fas fa-align-justify"></i><span> 诗词歌赋</span></a></li><li><a class="site-page child" href="/literature/modern"><i class="fa-fw fas fa-align-left"></i><span> 现代诗歌</span></a></li><li><a class="site-page child" href="/literature/journal"><i class="fa-fw fas fa-align-right"></i><span> 随心随笔</span></a></li><li><a class="site-page child" href="/literature/incomplete"><i class="fa-fw fas fa-columns"></i><span> 忘梦残句</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-commenting"></i><span> 交流</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/messageboard/"><i class="fa-fw fas fa-paper-plane"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/essay/1755143991957175514399123.webp);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src= "/img/20241215205335173426721579192.webp" data-lazy-src="/img/logo.png" alt="Logo"><span class="site-name">余一叶知秋尽</span></a><a class="nav-page-title" href="/"><span class="site-name">剧本分镜智能体架构设计与实现（MVP版）</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list-ul"></i><span> 归档</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类别</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签集</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-outdent"></i><span> AI</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/ai/aigc/"><i class="fa-fw fas fa-cubes"></i><span> AIGC 创意平台</span></a></li><li><a class="site-page child" href="https://github.com/HengLine/video-shot-agent"><i class="fa-fw fas fa-file-video"></i><span> 剧本分镜Agent</span></a></li><li><a class="site-page child" href="/ai/agent/video/"><i class="fa-fw fas fa-cut"></i><span> 视频混剪Agent</span></a></li><li><a class="site-page child" href="/ai/agent/medical/"><i class="fa-fw fas fa-medkit"></i><span> 医疗问答Agent</span></a></li><li><a class="site-page child" href="https://github.com/HengLine/ai-stocks-agent"><i class="fa-fw fas fa-line-chart"></i><span> 股票分析Agent</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list-ol"></i><span> 项目</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/turnkey/smart-city"><i class="fa-fw fas fa-building"></i><span> 智慧城市（IOT）</span></a></li><li><a class="site-page child" href="/turnkey/smart-security"><i class="fa-fw fas fa-check-circle"></i><span> 智慧安检（IOT）</span></a></li><li><a class="site-page child" href="/turnkey/tms"><i class="fa-fw fas fa-truck"></i><span> 物流运输（TMS）</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-cogs"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tools/json/"><i class="fa-fw fas fa-cog"></i><span> JSON 转换工具集</span></a></li><li><a class="site-page child" href="/tools/diagrams/mermaid"><i class="fa-fw fas fa-pie-chart"></i><span> Mermaid 绘制 UML</span></a></li><li><a class="site-page child" href="/tools/image/compressor/"><i class="fa-fw fas fa-image"></i><span> 图像批量压缩大小</span></a></li><li><a class="site-page child" href="/tools/image/watermark/"><i class="fa-fw fas fa-image"></i><span> 图像批量添加水印</span></a></li><li><a class="site-page child" href="/tools/image/convert/"><i class="fa-fw fas fa-file-image"></i><span> 图像格式编码转换</span></a></li><li><a class="site-page child" href="/tools/video/cropping/"><i class="fa-fw fas fa-cut"></i><span> 视频时长范围裁剪</span></a></li><li><a class="site-page child" href="/tools/video/watermark/"><i class="fa-fw fas fa-video"></i><span> 视频加水印马赛克</span></a></li><li><a class="site-page child" href="/tools/download/"><i class="fa-fw fas fa-cloud-download"></i><span> 批量下载视频图片</span></a></li><li><a class="site-page child" href="/tools/docu/watermark/"><i class="fa-fw fas fa-file-pdf"></i><span> PDF 添加文字水印</span></a></li><li><a class="site-page child" href="/tools/docu/signature"><i class="fa-fw fas fa-file"></i><span> 文档在线手写签名</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-pencil-square"></i><span> 文学</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/literature/poems"><i class="fa-fw fas fa-align-center"></i><span> 三行诗集</span></a></li><li><a class="site-page child" href="/literature/classical"><i class="fa-fw fas fa-align-justify"></i><span> 诗词歌赋</span></a></li><li><a class="site-page child" href="/literature/modern"><i class="fa-fw fas fa-align-left"></i><span> 现代诗歌</span></a></li><li><a class="site-page child" href="/literature/journal"><i class="fa-fw fas fa-align-right"></i><span> 随心随笔</span></a></li><li><a class="site-page child" href="/literature/incomplete"><i class="fa-fw fas fa-columns"></i><span> 忘梦残句</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-commenting"></i><span> 交流</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/messageboard/"><i class="fa-fw fas fa-paper-plane"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">剧本分镜智能体架构设计与实现（MVP版）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-10-28T16:00:00.000Z" title="发表于 2025-10-29 00:00:00">2025-10-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-28T03:39:17.986Z" title="更新于 2026-02-28 11:39:17">2026-02-28</time></span></div><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/AI/">AI</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/AI/Agent/">Agent</a></span><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>该工具能将用户提供的原始自然语言剧本，自动拆分为多个<strong>n秒长度的短视频片段脚本</strong>，并确保<strong>画面连贯性、角色一致性、动作延续性</strong>，适用于主流 AI 视频生成模型（如 Runway、Pika、Sora、Wan、Stable Video等）</p>
<blockquote>
<ul class="lvl-1">
<li class="lvl-2">
<p><strong>需求描述</strong>：假如我有一段预估两分钟左右的剧本，想通过AI模型生成对应的短视频。</p>
</li>
<li class="lvl-2">
<p><strong>技术受限</strong>：目前的各种模型仅支持一次生成5-10秒长度的视频，想要生成两分钟长度的视频，只能通过“拼接”的方式，将多个5秒的片段合成为一个视频。</p>
</li>
<li class="lvl-2">
<p><strong>任务&amp;挑战点</strong>：要实现视频拼接，第一步就需要拆分原剧本，拆分后的剧本尽量接近5-10秒时长（取决于模型），且每个视频片段还必须要保持连贯性，不然生成的视频片段合成后会导致场景、动作、人物等衔接不上。</p>
<p>且剧情中的动作、语速等会影响时长，所以需要考虑多种情景，比如：老人动作慢、生气怒吼时语速会较快、跑比走要快等等。</p>
<p>这便是本智能体需要完成的任务，用户只需要给出剧本，而后根据各种技术拆解，最后将拆解完成的剧本片段返回，用户只需要将其交给模型（Runway、Pika、Sora、Wan、Stable Video等）生成即可，最后再利用相关技术将片段合成为完整视频。</p>
</li>
</ul>
</blockquote>
<p>详细使用方式，请参照 <a href="https://github.com/HengLine/tool-shot-agent">GitHub 项目</a> （功能开发完善中），如果有更好的思路或想法，可参与开发或提出需求。</p>
<h2 id="剧本分镜智能体（V1-x）"><a href="https://github.com/HengLine/tool-shot-agent">剧本分镜智能体</a>（V1.x）</h2>
<p>当前版本：1.0.0（MVP版），<strong>单次简短剧本处理，不跨剧本记录状态</strong></p>
<h3 id="设计原则">设计原则</h3>
<ol>
<li class="lvl-3">
<p>核心功能优先，简化复杂性</p>
</li>
<li class="lvl-3">
<p>尽可能使用LLM，减少规则实现</p>
</li>
<li class="lvl-3">
<p>保持基础连续性，但不过度设计</p>
</li>
<li class="lvl-3">
<p>输出格式统一，便于后续扩展</p>
</li>
</ol>
<p><strong>包含的核心功能</strong></p>
<blockquote>
<ol>
<li class="lvl-3">
<p>基础剧本解析（场景、角色、对话）</p>
</li>
<li class="lvl-3">
<p>简单镜头拆分（基于场景和对话）</p>
</li>
<li class="lvl-3">
<p>5秒强制切分（无复杂合并）</p>
</li>
<li class="lvl-3">
<p>基础Prompt生成（模板+LLM）</p>
</li>
<li class="lvl-3">
<p>基础质量检查（时长、基本连续性）</p>
</li>
</ol>
</blockquote>
<p><strong>暂不包含的功能</strong>（后续版本）</p>
<blockquote>
<ol>
<li class="lvl-3">
<p>复杂连续性管理</p>
</li>
<li class="lvl-3">
<p>多模型适配</p>
</li>
<li class="lvl-3">
<p>智能合并策略</p>
</li>
<li class="lvl-3">
<p>高级情感分析</p>
</li>
<li class="lvl-3">
<p>自动修正回滚</p>
</li>
</ol>
</blockquote>
<h3 id="核心目标">核心目标</h3>
<p>将任意长度的剧本，拆分为N个5秒的、视觉连贯的Sora视频片段脚本单元（Shot）</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>自动化转换</strong>：实现剧本→AI视频指令的端到端自动化流程</p>
</li>
<li class="lvl-2">
<p><strong>智能分段</strong>：智能处理5秒限制，保证叙事连贯性</p>
</li>
<li class="lvl-2">
<p><strong>连续性保障</strong>：基础的角色、场景、道具一致性维护</p>
</li>
<li class="lvl-2">
<p><strong>高质量输出</strong>：生成专业级的AI视频生成提示词</p>
</li>
</ul>
<blockquote>
<p>核心挑战：</p>
<ol>
<li class="lvl-3">处理多种输入格式（自然语言、AI分镜、结构化场景、标准剧本）</li>
<li class="lvl-3">精确估算每个视觉/对话元素的合理时长</li>
<li class="lvl-3">确保5秒片段间的视觉和叙事连贯性</li>
<li class="lvl-3">生成Sora优化的提示词</li>
</ol>
</blockquote>
<h3 id="使用场景">使用场景</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>场景1：内容创作者</p>
<p><strong>用户画像</strong>：短视频创作者、自媒体博主、内容营销人员<br>
<strong>典型需求</strong>：快速将故事脚本转化为视频内容，批量生成短视频素材，降低视频制作门槛和时间成本</p>
</li>
<li class="lvl-2">
<p>场景2：影视制作预可视化</p>
<p><strong>用户画像</strong>：独立电影人、学生剧组、低成本制作团队<br>
<strong>典型需求</strong>：剧本的分镜预览和可视化，成本可控的概念验证</p>
</li>
<li class="lvl-2">
<p>场景3：游戏剧情制作</p>
<p><strong>用户画像</strong>：独立游戏开发者、视觉小说创作者<br>
<strong>典型需求</strong>：游戏过场动画的快速原型，低成本的情节演示</p>
</li>
<li class="lvl-2">
<p>场景4：教育培训内容</p>
<p><strong>用户画像</strong>：在线教育机构、企业培训部门、知识付费创作者<br>
<strong>典型需求</strong>：将文字课程转化为视频课程，快速更新和迭代教学内容</p>
</li>
<li class="lvl-2">
<p>场景5：广告营销素材</p>
<p><strong>用户画像</strong>：广告代理公司、电商企业、品牌营销团队<br>
<strong>典型需求</strong>：快速生成多平台适配的产品演示视频</p>
</li>
</ul>
<h3 id="输入输出">输入输出</h3>
<table>
<thead>
<tr>
<th style="text-align:left">阶段</th>
<th style="text-align:left">输入</th>
<th style="text-align:left">输出</th>
<th style="text-align:left">关键处理</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>剧本解析</strong></td>
<td style="text-align:left">原始文本</td>
<td style="text-align:left">结构化剧本</td>
<td style="text-align:left">LLM提取场景、角色、对话</td>
</tr>
<tr>
<td style="text-align:left"><strong>镜头拆分</strong></td>
<td style="text-align:left">结构化剧本</td>
<td style="text-align:left">镜头序列</td>
<td style="text-align:left">按对话和动作变化分镜</td>
</tr>
<tr>
<td style="text-align:left"><strong>视频分段</strong></td>
<td style="text-align:left">镜头序列</td>
<td style="text-align:left">视频片段</td>
<td style="text-align:left">5秒切分，保持连续性</td>
</tr>
<tr>
<td style="text-align:left"><strong>指令转换</strong></td>
<td style="text-align:left">视频片段</td>
<td style="text-align:left">Prompt指令</td>
<td style="text-align:left">LLM生成视觉描述</td>
</tr>
<tr>
<td style="text-align:left"><strong>质量审查</strong></td>
<td style="text-align:left">Prompt指令</td>
<td style="text-align:left">审查报告</td>
<td style="text-align:left">基础规则检查</td>
</tr>
</tbody>
</table>
<p><strong>输入剧本</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;script&quot;</span><span class="punctuation">:</span> <span class="string">&quot;剧本标题：《雨中的约定》\n时长：约30秒\n场景：城市街角咖啡店外，雨天\n角色：\n- 林小雨（女，20岁，学生，抱着一本湿漉漉的书）\n- 陈阳（男，22岁，兼职外卖员，穿着黄色雨衣）\n\n[开场]\n（雨声淅沥，镜头从灰蒙蒙的天空下摇，聚焦在咖啡店外的长椅上。林小雨蹲在长椅旁，用手帕擦拭一本被雨水浸湿的诗集，神情焦急。）\n林小雨（自言自语，带着哭腔）：\n\&quot;明明说好今天还书的……这雨下得，他会不会不来了？\&quot;\n\n[镜头切换]\n（陈阳骑着电动车冲进雨幕，后座外卖箱里露出一角蓝色封面的书。他刹车太急，差点撞上长椅，林小雨的书掉进水洼。）\n陈阳（手忙脚乱捡书，抬头）：\n\&quot;对不起！这书……是你的？\&quot;\n\n[特写]\n（两本书并排躺在水洼里——林小雨的《飞鸟集》，陈阳外卖箱里的同款书，封面上贴着\&quot;借阅卡：陈阳→林小雨\&quot;。）\n林小雨（愣住，突然笑了）：\n\&quot;你迟到十分钟，但……书没湿透。\&quot;\n\n陈阳（挠头，从雨衣里掏出干毛巾裹住书）：\n\&quot;我跑了两条街找防水袋……诗里说&#x27;雨是云的眼泪&#x27;，可我不想让你哭。\&quot;\n\n[结尾]\n（雨渐小，阳光穿透云层。林小雨翻开书，里面夹着一张电影票根，日期是下周三。陈阳脱下雨衣罩在她头上，两人并肩跑向屋檐，笑声渐远。）\n画外音（林小雨的旁白）：\n\&quot;有些约定，会迟到，但永远不会缺席。\&quot;\n\n[黑屏，字幕浮现]\n\&quot;雨会停，而故事才刚刚开始。\&quot;\n\n风格：清新治愈，带点幽默，适合短视频平台传播。\n核心冲突：用\&quot;湿书\&quot;和\&quot;迟到\&quot;制造小误会，通过\&quot;同款书\&quot;和\&quot;电影票\&quot;暗示双向暗恋，雨天象征情感转折。&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>API 输出结果</strong>（分段后的指令提示词）：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;task_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HL202602101908249720&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;success&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;fragment_sequence&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;split_method&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llm_adaptive&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;ai_split_count&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;rule_split_count&quot;</span><span class="punctuation">:</span> <span class="number">14</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;total_fragments&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;average_duration&quot;</span><span class="punctuation">:</span> <span class="number">3.18</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;cutter_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLMVideoSplitter&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fixed_by_output_fixer&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fix_timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10 19:19:01&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fix_version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;source_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;shot_count&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;original_duration&quot;</span><span class="punctuation">:</span> <span class="number">57.4</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;split_method&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llm_adaptive&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;scene_context&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;scenes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;scene_001&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;shot_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                    <span class="string">&quot;shot_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;shot_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;shot_003&quot;</span></span><br><span class="line">                                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">13.1</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;main_characters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                    <span class="string">&quot;林小雨&quot;</span></span><br><span class="line">                                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;mood&quot;</span><span class="punctuation">:</span> <span class="string">&quot;neutral&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;scene_002&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;shot_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                    <span class="string">&quot;shot_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;shot_005&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;shot_006&quot;</span></span><br><span class="line">                                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">9.8</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;main_characters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                    <span class="string">&quot;陈阳&quot;</span></span><br><span class="line">                                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;mood&quot;</span><span class="punctuation">:</span> <span class="string">&quot;neutral&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;scene_003&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;shot_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                    <span class="string">&quot;shot_007&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;shot_008&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;shot_009&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;shot_010&quot;</span></span><br><span class="line">                                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">16.3</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;main_characters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                    <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;陈阳&quot;</span></span><br><span class="line">                                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;mood&quot;</span><span class="punctuation">:</span> <span class="string">&quot;neutral&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;scene_004&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;shot_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                    <span class="string">&quot;shot_011&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;shot_012&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;shot_013&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;shot_014&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;shot_015&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;shot_016&quot;</span></span><br><span class="line">                                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">18.2</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;main_characters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                    <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;陈阳&quot;</span></span><br><span class="line">                                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;mood&quot;</span><span class="punctuation">:</span> <span class="string">&quot;neutral&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;characters&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;林小雨&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;scenes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                    <span class="string">&quot;scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;scene_004&quot;</span></span><br><span class="line">                                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">23.3</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;陈阳&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;scenes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                    <span class="string">&quot;scene_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="string">&quot;scene_004&quot;</span></span><br><span class="line">                                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">25.3</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;locations&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;mood&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;fragments&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722201.940925</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;1&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.2</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;全景：灰蒙蒙的天空低垂，细雨如雾，镜头缓缓下摇：雨丝斜织，梧桐叶尖悬垂晶莹水珠，...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;灰蒙蒙的天空低垂，细雨如雾，镜头缓缓下摇：雨丝斜织，梧桐叶尖悬垂晶莹水珠，一滴坠入长椅旁积水，涟漪荡开倒映着远处咖啡店模糊的暖黄灯光；长椅漆面微湿泛暗光，三片湿透的梧桐落叶紧贴椅脚，积水如镜，映出晃动的云影与霓虹残光。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722201.940925</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;2&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">4.2</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.8</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景：中景，长椅左侧：林小雨蜷身蹲在湿漉漉的地砖上，米白色针织外套肩头洇开两片深...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景，长椅左侧：林小雨蜷身蹲在湿漉漉的地砖上，米白色针织外套肩头洇开两片深灰水痕，发梢微潮贴于额角；她左手托着一本深蓝布面诗集（书脊翘起、页角卷曲发软），右手用叠成方块的浅蓝手帕反复轻压封面内页，指尖微微发白；雨水顺着她睫毛颤动滑落，目光紧盯书页上晕开的墨迹，呼吸略促，下唇被牙齿无意识轻咬。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ai&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;original_shot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;ai_decision&quot;</span><span class="punctuation">:</span> <span class="string">&quot;镜头时长为5.1秒，仅略超分割阈值（5.0秒），但其内部动作与情绪表达具有高度统一性：从泪珠悬垂、微哑台词、喉间微动、目光抬落、手帕捻皱到瞳孔光斑晃动，构成一个完整细腻的情绪微循环。分割将破坏‘泪将落未落’这一核心视觉意象的张力，以及台词‘明明说好今天还书的……’所承载的顿挫感与余韵。所有元素（雨气氤氲、暖黄灯光、侧脸角度、手帕质地、诗集伏笔）均与前后镜头严密呼应，且特写类型天然适合承载3–5秒的情感凝滞节奏。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722216.5647821</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;3&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">8.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">5.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写，林小雨侧脸：雨气氤氲中，她睫毛低垂，右眼微眨，一滴混着雨水的泪珠悬在下睫毛尖将落未落；嘴唇翕动，声音轻而微哑，背景雨声稍抑——‘明明说好今天还书的……’她喉间微动，目光倏然抬向街对面模糊的伞影，又迅速垂下，指尖无意识捻皱手帕一角；暖黄灯光在她瞳孔里映出两粒微小、晃动的光斑。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;continuity_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_003_whole&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;split_reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;镜头时长为5.1秒，仅略超分割阈值（5.0秒），但其内部动作与情绪表达具有高度统一性：从泪珠悬垂、微哑台词、喉间微动、目光抬落、手帕捻皱到瞳孔光斑晃动，构成一个完整细腻的情绪微循环。分割将破坏‘泪将落未落’这一核心视觉意象的张力，以及台词‘明明说好今天还书的……’所承载的顿挫感与余韵。所有元素（雨气氤氲、暖黄灯光、侧脸角度、手帕质地、诗集伏笔）均与前后镜头严密呼应，且特写类型天然适合承载3–5秒的情感凝滞节奏。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722216.5647821</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;1&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">13.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.6</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;全景：全景俯角略带倾斜：灰蒙蒙的下午雨幕笼罩城市街角，积水在沥青路面漫延成片，反...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;全景俯角略带倾斜：灰蒙蒙的下午雨幕笼罩城市街角，积水在沥青路面漫延成片，反光映出低垂云层；咖啡店遮阳棚边缘滴水成线，节奏均匀；一辆蓝色外卖箱电动车正斜冲入画面右下角，后座箱盖微掀，一角靛蓝硬壳书脊刺破雨帘；长椅静置中央，椅面湿透，水珠沿木纹边缘连缀滴落。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722216.5647821</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_005&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_005&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;2&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">16.6</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.9</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景：中景侧跟镜头（略低机位）：陈阳急刹甩尾，雨衣兜帽滑落，额发湿贴，脸颊泛红喘...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景侧跟镜头（略低机位）：陈阳急刹甩尾，雨衣兜帽滑落，额发湿贴，脸颊泛红喘息未定；他踉跄跳下车，右手本能去扶歪斜的车把，左手已扑向长椅下方——那本被溅起泥水半浸的蓝色封面书正卡在椅腿与水洼之间，书页微卷，封面上‘《潮汐简史》’烫银字迹被雨水晕开一道细痕；他指尖沾泥，指节因用力泛白。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722216.5647821</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_006&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_006&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;3&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">19.5</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.3</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写：特写（浅景深，雨丝在焦点前虚化）：陈阳抬起的脸——睫毛挂水，左眉微蹙，瞳孔...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写（浅景深，雨丝在焦点前虚化）：陈阳抬起的脸——睫毛挂水，左眉微蹙，瞳孔收缩映着咖啡店暖黄灯光与对面长椅空荡轮廓；他嘴唇微张欲言，喉结轻动，呼吸在冷雨中凝成一缕白气；背景虚化处，水洼倒影晃动，映出他身后未关严的外卖箱盖与一角模糊蓝封。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722216.5647821</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_007&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_007&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;1&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">22.8</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.7</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;全景：全景俯角镜头：城市街角积水洼特写，浑浊水面上倒映低垂的铅灰色云层与疏朗摇曳...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;全景俯角镜头：城市街角积水洼特写，浑浊水面上倒映低垂的铅灰色云层与疏朗摇曳的梧桐枯枝；两本蓝封皮《飞鸟集》并排浮于水面，书页微漾，封面上‘借阅卡：陈阳→林小雨’字迹清晰可辨，纸边微卷但未浸透，水波轻推书脊相触。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722216.5647821</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_008&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_008&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;2&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">25.5</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写：特写镜头：林小雨半侧脸入画，发梢微湿，睫毛低垂，目光凝在水洼中的书上；她嘴...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写镜头：林小雨半侧脸入画，发梢微湿，睫毛低垂，目光凝在水洼中的书上；她嘴角微松，呼吸轻缓，左手无意识捻着衣角——语毕时喉间微动，一缕被风吹乱的额发贴在汗湿的太阳穴上。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722216.5647821</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_009&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_009&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;3&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">29.5</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.2</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景：中景镜头（略带仰角）：陈阳立于水洼右侧，黄色外卖头盔斜扣在臂弯，深蓝色雨衣...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景镜头（略带仰角）：陈阳立于水洼右侧，黄色外卖头盔斜扣在臂弯，深蓝色雨衣下摆滴水，他低头挠后脑，指节蹭过耳际泛红的皮肤；右手从雨衣内袋小心抽出干毛巾，棉质纹理清晰，边缘已微微起毛。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ai&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;original_shot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_010&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;ai_decision&quot;</span><span class="punctuation">:</span> <span class="string">&quot;镜头时长6.4秒，超过分割阈值5.0秒；内容包含多重微动作序列（指尖捏毛巾→覆上书封→喉结滑动→睫毛颤动→雨痕特写→梧桐枝影掠过），各动作间存在自然呼吸停顿点，适合按视觉焦点转移与生理节奏切分；其中‘覆上封面’为动作峰值，‘喉结滑动+睫毛颤动’构成情绪微反应段，‘雨痕未干+枝影掠过’为氛围收束段，三者节奏不同（动作→微表情→环境呼应），符合节奏控制原则中‘动作/表情/环境’的差异化时长建议。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722234.4627943</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_010&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;4&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">32.7</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.3</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写镜头：陈阳沾着水珠的指尖捏住毛巾一角，缓缓抬起并开始覆向左侧《飞鸟集》蓝封皮封面；米白毛巾边缘纤维清晰，水珠在指腹折射微光。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;continuity_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_010_seq1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;prev_fragment&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;split_reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;镜头时长6.4秒，超过分割阈值5.0秒；内容包含多重微动作序列（指尖捏毛巾→覆上书封→喉结滑动→睫毛颤动→雨痕特写→梧桐枝影掠过），各动作间存在自然呼吸停顿点，适合按视觉焦点转移与生理节奏切分；其中‘覆上封面’为动作峰值，‘喉结滑动+睫毛颤动’构成情绪微反应段，‘雨痕未干+枝影掠过’为氛围收束段，三者节奏不同（动作→微表情→环境呼应），符合节奏控制原则中‘动作/表情/环境’的差异化时长建议。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ai&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;original_shot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_010&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;ai_decision&quot;</span><span class="punctuation">:</span> <span class="string">&quot;镜头时长6.4秒，超过分割阈值5.0秒；内容包含多重微动作序列（指尖捏毛巾→覆上书封→喉结滑动→睫毛颤动→雨痕特写→梧桐枝影掠过），各动作间存在自然呼吸停顿点，适合按视觉焦点转移与生理节奏切分；其中‘覆上封面’为动作峰值，‘喉结滑动+睫毛颤动’构成情绪微反应段，‘雨痕未干+枝影掠过’为氛围收束段，三者节奏不同（动作→微表情→环境呼应），符合节奏控制原则中‘动作/表情/环境’的差异化时长建议。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722234.4628613</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_011_s2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_010&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">35.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.6</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写镜头：毛巾已轻覆《飞鸟集》封面，陈阳说话时喉结上下滑动，睫毛轻微颤动，右眼下方那道浅浅雨痕仍湿润反光；虚化背景中梧桐枝影初现，正缓慢移入画面左肩区域。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;continuity_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_010_seq2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;prev_fragment&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;split_reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;镜头时长6.4秒，超过分割阈值5.0秒；内容包含多重微动作序列（指尖捏毛巾→覆上书封→喉结滑动→睫毛颤动→雨痕特写→梧桐枝影掠过），各动作间存在自然呼吸停顿点，适合按视觉焦点转移与生理节奏切分；其中‘覆上封面’为动作峰值，‘喉结滑动+睫毛颤动’构成情绪微反应段，‘雨痕未干+枝影掠过’为氛围收束段，三者节奏不同（动作→微表情→环境呼应），符合节奏控制原则中‘动作/表情/环境’的差异化时长建议。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ai&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;original_shot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_010&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;ai_decision&quot;</span><span class="punctuation">:</span> <span class="string">&quot;镜头时长6.4秒，超过分割阈值5.0秒；内容包含多重微动作序列（指尖捏毛巾→覆上书封→喉结滑动→睫毛颤动→雨痕特写→梧桐枝影掠过），各动作间存在自然呼吸停顿点，适合按视觉焦点转移与生理节奏切分；其中‘覆上封面’为动作峰值，‘喉结滑动+睫毛颤动’构成情绪微反应段，‘雨痕未干+枝影掠过’为氛围收束段，三者节奏不同（动作→微表情→环境呼应），符合节奏控制原则中‘动作/表情/环境’的差异化时长建议。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722234.4628613</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_012_s3&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_010&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">37.6</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">1.5</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写镜头：陈阳保持静止，毛巾完全覆盖书封，梧桐枝影掠过他左肩，光影在湿发与耳际泛起柔边；右眼下方雨痕微微晕开，背景虚化加深，枝影轮廓渐融于浅焦外。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;continuity_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_010_seq3&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;prev_fragment&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_011_s2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;split_reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;镜头时长6.4秒，超过分割阈值5.0秒；内容包含多重微动作序列（指尖捏毛巾→覆上书封→喉结滑动→睫毛颤动→雨痕特写→梧桐枝影掠过），各动作间存在自然呼吸停顿点，适合按视觉焦点转移与生理节奏切分；其中‘覆上封面’为动作峰值，‘喉结滑动+睫毛颤动’构成情绪微反应段，‘雨痕未干+枝影掠过’为氛围收束段，三者节奏不同（动作→微表情→环境呼应），符合节奏控制原则中‘动作/表情/环境’的差异化时长建议。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722234.4628613</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_013&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_011&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;1&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">39.1</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;全景：全景俯角镜头：城市街角咖啡店外，青灰石板路泛着微光，细密雨丝渐疏，水洼如碎...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;全景俯角镜头：城市街角咖啡店外，青灰石板路泛着微光，细密雨丝渐疏，水洼如碎镜映出流动的云影；一道暖金色斜光自云层裂隙倾泻而下，光斑在积水表面轻盈跳跃，照亮屋檐滴落的最后几颗水珠。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722234.4628613</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_014&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_012&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;2&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">42.1</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.5</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景：中景侧拍镜头：林小雨坐在咖啡店外木制长椅上，发梢微湿，浅蓝针织衫肩头洇着淡...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景侧拍镜头：林小雨坐在咖啡店外木制长椅上，发梢微湿，浅蓝针织衫肩头洇着淡痕；她指尖轻抚书页边缘，缓缓翻开硬壳精装书——内页夹着一张泛黄电影票根，票面印着‘《夏夜放映室》·下周三 19:30’，字迹清晰，边角微卷，映着斜射进来的金光微微反光。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722234.4628613</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_015&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_013&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;3&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">44.6</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.8</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景：中景过肩镜头（从林小雨左后方）：陈阳站在她右侧半步外，黑色雨衣尚披在身上，...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景过肩镜头（从林小雨左后方）：陈阳站在她右侧半步外，黑色雨衣尚披在身上，雨水顺帽檐滑落；他低头一笑，动作轻缓却笃定，双手提起雨衣宽大兜帽，温柔罩向林小雨头顶——布料垂落瞬间，金光恰好漫过他抬手的手背，青筋与暖光交织，雨衣内衬靛蓝与她浅蓝毛衣形成柔和色阶。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722234.4628613</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_016&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_014&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;4&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">47.4</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.1</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景：中景跟拍镜头（略低机位）：两人并肩起身，林小雨左手仍攥着那本书，陈阳右手自...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨,陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景跟拍镜头（略低机位）：两人并肩起身，林小雨左手仍攥着那本书，陈阳右手自然虚护在她肘侧；他们笑着冲向咖啡店延伸出的深褐色木纹屋檐，脚步踏起细碎水花，发丝与衣角被微风轻扬；背景中雨丝已成薄雾，光柱在他们奔跑的剪影边缘镀上毛茸茸的金边，笑声清亮，渐行渐远。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722234.4628613</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_017&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_015&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;5&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">50.5</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.8</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写：特写双人同框镜头（柔焦浅景深）：两人并肩立于屋檐下，肩头并排沐浴在斜洒金光...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写双人同框镜头（柔焦浅景深）：两人并肩立于屋檐下，肩头并排沐浴在斜洒金光中，睫毛投下细颤阴影；林小雨侧脸微仰，唇角上扬，眼神澄澈带笑，嘴唇轻启——‘有些约定，会迟到，但永远不会缺席。’ 她说话时，一滴残留在陈阳雨衣肩章上的水珠正悄然滑落，映着光，像一颗将坠未坠的星。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;split_by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rule&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;segment_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;total_segments&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1770722234.4628613</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_018&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_016&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;6&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">55.3</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;全景：黑场渐入：纯黑背景中，白色手写体字幕逐字浮现，笔触温润如墨迹未干——‘雨会...&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;黑场渐入：纯黑背景中，白色手写体字幕逐字浮现，笔触温润如墨迹未干——‘雨会停，而故事才刚刚开始。’ 字体末尾一点微微晕染，仿佛被最后一滴雨轻轻点化；画面始终静默，唯余余韵。&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;fragment_count&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">57.3</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;avg_duration&quot;</span><span class="punctuation">:</span> <span class="number">3.183333333333333</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fragments_under_5s&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fragments_split&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;split_ratio&quot;</span><span class="punctuation">:</span> <span class="number">0.89</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;shot_sequence&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;generated_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10T19:16:41.906248&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mvp_1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;parser_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_splitter_v1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;total_shots&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;splitter_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLMShotSegmenter&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;script_reference&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;雨中的约定&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;total_elements&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;original_duration&quot;</span><span class="punctuation">:</span> <span class="number">57.4</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;shots&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;灰蒙蒙的天空低垂，细雨如雾，镜头缓缓下摇：雨丝斜织，梧桐叶尖悬垂晶莹水珠，一滴坠入长椅旁积水，涟漪荡开倒映着远处咖啡店模糊的暖黄灯光；长椅漆面微湿泛暗光，三片湿透的梧桐落叶紧贴椅脚，积水如镜，映出晃动的云影与霓虹残光。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.2</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wide_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;1&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景，长椅左侧：林小雨蜷身蹲在湿漉漉的地砖上，米白色针织外套肩头洇开两片深灰水痕，发梢微潮贴于额角；她左手托着一本深蓝布面诗集（书脊翘起、页角卷曲发软），右手用叠成方块的浅蓝手帕反复轻压封面内页，指尖微微发白；雨水顺着她睫毛颤动滑落，目光紧盯书页上晕开的墨迹，呼吸略促，下唇被牙齿无意识轻咬。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">4.2</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.8</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;medium_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;2&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写，林小雨侧脸：雨气氤氲中，她睫毛低垂，右眼微眨，一滴混着雨水的泪珠悬在下睫毛尖将落未落；嘴唇翕动，声音轻而微哑，背景雨声稍抑——‘明明说好今天还书的……’她喉间微动，目光倏然抬向街对面模糊的伞影，又迅速垂下，指尖无意识捻皱手帕一角；暖黄灯光在她瞳孔里映出两粒微小、晃动的光斑。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">8.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">5.1</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;close_up&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;3&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;全景俯角略带倾斜：灰蒙蒙的下午雨幕笼罩城市街角，积水在沥青路面漫延成片，反光映出低垂云层；咖啡店遮阳棚边缘滴水成线，节奏均匀；一辆蓝色外卖箱电动车正斜冲入画面右下角，后座箱盖微掀，一角靛蓝硬壳书脊刺破雨帘；长椅静置中央，椅面湿透，水珠沿木纹边缘连缀滴落。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">13.1</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.6</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wide_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;1&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_005&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景侧跟镜头（略低机位）：陈阳急刹甩尾，雨衣兜帽滑落，额发湿贴，脸颊泛红喘息未定；他踉跄跳下车，右手本能去扶歪斜的车把，左手已扑向长椅下方——那本被溅起泥水半浸的蓝色封面书正卡在椅腿与水洼之间，书页微卷，封面上‘《潮汐简史》’烫银字迹被雨水晕开一道细痕；他指尖沾泥，指节因用力泛白。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">16.7</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.9</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;medium_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;2&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_006&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写（浅景深，雨丝在焦点前虚化）：陈阳抬起的脸——睫毛挂水，左眉微蹙，瞳孔收缩映着咖啡店暖黄灯光与对面长椅空荡轮廓；他嘴唇微张欲言，喉结轻动，呼吸在冷雨中凝成一缕白气；背景虚化处，水洼倒影晃动，映出他身后未关严的外卖箱盖与一角模糊蓝封。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">19.6</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.3</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;close_up&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;3&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_007&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;全景俯角镜头：城市街角积水洼特写，浑浊水面上倒映低垂的铅灰色云层与疏朗摇曳的梧桐枯枝；两本蓝封皮《飞鸟集》并排浮于水面，书页微漾，封面上‘借阅卡：陈阳→林小雨’字迹清晰可辨，纸边微卷但未浸透，水波轻推书脊相触。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">22.9</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.7</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wide_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;1&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_008&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写镜头：林小雨半侧脸入画，发梢微湿，睫毛低垂，目光凝在水洼中的书上；她嘴角微松，呼吸轻缓，左手无意识捻着衣角——语毕时喉间微动，一缕被风吹乱的额发贴在汗湿的太阳穴上。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">25.6</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;close_up&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;2&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_009&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景镜头（略带仰角）：陈阳立于水洼右侧，黄色外卖头盔斜扣在臂弯，深蓝色雨衣下摆滴水，他低头挠后脑，指节蹭过耳际泛红的皮肤；右手从雨衣内袋小心抽出干毛巾，棉质纹理清晰，边缘已微微起毛。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">29.6</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.2</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;medium_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;3&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_010&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写镜头：陈阳沾着水珠的指尖捏住毛巾一角，缓缓覆上左侧那本《飞鸟集》封面，蓝封皮与米白毛巾形成柔和对比；他说话时喉结上下滑动，睫毛颤动，右眼下方有道浅浅雨痕未干，背景虚化中梧桐枝影随风掠过他肩头。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">32.8</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">6.4</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;close_up&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;4&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_011&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;全景俯角镜头：城市街角咖啡店外，青灰石板路泛着微光，细密雨丝渐疏，水洼如碎镜映出流动的云影；一道暖金色斜光自云层裂隙倾泻而下，光斑在积水表面轻盈跳跃，照亮屋檐滴落的最后几颗水珠。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">39.2</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wide_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;1&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_012&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景侧拍镜头：林小雨坐在咖啡店外木制长椅上，发梢微湿，浅蓝针织衫肩头洇着淡痕；她指尖轻抚书页边缘，缓缓翻开硬壳精装书——内页夹着一张泛黄电影票根，票面印着‘《夏夜放映室》·下周三 19:30’，字迹清晰，边角微卷，映着斜射进来的金光微微反光。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">42.2</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.5</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;medium_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;2&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_013&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景过肩镜头（从林小雨左后方）：陈阳站在她右侧半步外，黑色雨衣尚披在身上，雨水顺帽檐滑落；他低头一笑，动作轻缓却笃定，双手提起雨衣宽大兜帽，温柔罩向林小雨头顶——布料垂落瞬间，金光恰好漫过他抬手的手背，青筋与暖光交织，雨衣内衬靛蓝与她浅蓝毛衣形成柔和色阶。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">44.7</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.8</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;medium_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;3&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_014&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景跟拍镜头（略低机位）：两人并肩起身，林小雨左手仍攥着那本书，陈阳右手自然虚护在她肘侧；他们笑着冲向咖啡店延伸出的深褐色木纹屋檐，脚步踏起细碎水花，发丝与衣角被微风轻扬；背景中雨丝已成薄雾，光柱在他们奔跑的剪影边缘镀上毛茸茸的金边，笑声清亮，渐行渐远。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">47.5</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.1</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;medium_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨,陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;4&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_015&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写双人同框镜头（柔焦浅景深）：两人并肩立于屋檐下，肩头并排沐浴在斜洒金光中，睫毛投下细颤阴影；林小雨侧脸微仰，唇角上扬，眼神澄澈带笑，嘴唇轻启——‘有些约定，会迟到，但永远不会缺席。’ 她说话时，一滴残留在陈阳雨衣肩章上的水珠正悄然滑落，映着光，像一颗将坠未坠的星。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">50.6</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.8</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;close_up&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;5&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_016&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;黑场渐入：纯黑背景中，白色手写体字幕逐字浮现，笔触温润如墨迹未干——‘雨会停，而故事才刚刚开始。’ 字体末尾一点微微晕染，仿佛被最后一滴雨轻轻点化；画面始终静默，唯余余韵。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">55.4</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wide_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;6&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;shot_count&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">57.4</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;avg_shot_duration&quot;</span><span class="punctuation">:</span> <span class="number">3.59</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;close_up_count&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;wide_shot_count&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;medium_shot_count&quot;</span><span class="punctuation">:</span> <span class="number">6</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;script_analysis&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;parsed_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10T19:15:48.156908&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mvp_1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;source_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llm_parsed&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;parser_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLMScriptParser&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;雨中的约定&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;characters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;女&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;主角&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;20岁，大学生，穿着浅色针织衫和牛仔裤，长发微湿，神情细腻敏感，怀抱一本被雨水打湿的诗集&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;key_traits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;细腻&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="string">&quot;感性&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="string">&quot;略带焦虑&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="string">&quot;温柔中带幽默&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;男&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;主角&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;22岁，兼职外卖员，高挑清瘦，戴黑框眼镜，穿明黄色连帽雨衣，动作略显笨拙但真诚&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;key_traits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;守信&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="string">&quot;笨拙暖心&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="string">&quot;有文学气息&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="string">&quot;行动力强&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;scenes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;城市街角咖啡店外&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;灰蒙蒙的雨天，梧桐树滴水，地面积水反光，长椅旁有零星落叶，远处模糊的咖啡店暖黄灯光&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;time_of_day&quot;</span><span class="punctuation">:</span> <span class="string">&quot;下午&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;elements&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.2</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.98</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;雨声淅沥，镜头从灰蒙蒙的天空下摇，聚焦在咖啡店外的长椅上&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;环境音效与运镜建立阴郁又温柔的基调，雨势中等，空气湿润&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.35</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;neutral&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;action&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.8</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.99</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨蹲在长椅旁，用手帕擦拭一本被雨水浸湿的诗集，神情焦急&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;手指微微发颤，书页卷边，手帕已半湿；她不时抬头望向街口&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.6</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;anxious&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dialogue&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">5.1</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.97</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;明明说好今天还书的……这雨下得，他会不会不来了？&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;自言自语，声音轻而哽咽，尾音微颤，带着少女式的委屈与期待&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.55</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sad&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;城市街角咖啡店外（同一地点，时间推进）&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;雨势未减，路面水洼扩大，电动车溅起水花，长椅边缘滴水成线&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;time_of_day&quot;</span><span class="punctuation">:</span> <span class="string">&quot;下午&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;elements&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;action&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.6</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.96</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳骑着电动车冲进雨幕，后座外卖箱里露出一角蓝色封面的书。他刹车太急，差点撞上长椅，林小雨的书掉进水洼&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;车轮打滑、雨衣兜帽被风掀开，他猛捏刹车时身体前倾，外卖箱盖弹开一瞬&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.85</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;urgent&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_005&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;action&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.9</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.95</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳手忙脚乱捡书，抬头&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;单膝跪入浅水，手指沾泥，眼镜起雾，眼神慌乱又诚恳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.7</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;embarrassed&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_006&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dialogue&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">6</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.3</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.98</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;对不起！这书……是你的？&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;语速快，气息不稳，‘是你的’三字稍拖长，带着试探与歉意&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.65</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;apologetic&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;城市街角咖啡店外（水洼特写）&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;积水倒映灰云与梧桐枝，两本《飞鸟集》并排浮于水面，蓝封面对比鲜明，借阅卡字迹清晰&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;time_of_day&quot;</span><span class="punctuation">:</span> <span class="string">&quot;下午&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;elements&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_007&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">7</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.7</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.99</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;两本书并排躺在水洼里——林小雨的《飞鸟集》，陈阳外卖箱里的同款书，封面上贴着&#x27;借阅卡：陈阳→林小雨&#x27;&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写镜头，水波微漾，借阅卡胶痕反光，暗示长期借阅与双向心意&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.4</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;neutral&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_008&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dialogue&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">8</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.0</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.97</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;你迟到十分钟，但……书没湿透。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;愣住后突然展颜，嘴角上扬，眼眶仍微红，语气由怔忡转为俏皮释然&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.5</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;happy&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_009&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;action&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">9</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.2</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.96</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳挠头，从雨衣里掏出干毛巾裹住书&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;动作憨厚，毛巾叠得整齐却略显局促，指尖小心避开书页褶皱&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.45</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shy&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_010&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dialogue&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">6.4</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.95</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我跑了两条街找防水袋……诗里说&#x27;雨是云的眼泪&#x27;，可我不想让你哭。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;语速放缓，目光专注，最后一句轻声但坚定，雨衣帽檐下眼神明亮&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.6</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tender&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;城市街角咖啡店外（屋檐下过渡）&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;雨渐小，光斑在水洼跳跃，云层裂开缝隙，暖金色光线斜洒在两人肩头&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;time_of_day&quot;</span><span class="punctuation">:</span> <span class="string">&quot;下午&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;elements&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_011&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">11</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.98</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;雨渐小，阳光穿透云层&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;光影变化象征情绪转折，雨丝变细，空气通透感增强&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.3</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;neutral&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_012&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;action&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">12</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.5</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.97</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨翻开书，里面夹着一张电影票根，日期是下周三&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;指尖停顿在票根上，唇角微扬，未看陈阳却耳尖泛红&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.4</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;happy&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_013&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;action&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">13</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.8</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.96</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳脱下雨衣罩在她头上&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;动作自然利落，自己大半肩膀暴露在细雨中，雨衣宽大如伞&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.5</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;protective&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_014&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;action&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">14</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.1</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.95</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;两人并肩跑向屋檐，笑声渐远&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;陈阳&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨左手举书，右手轻拽陈阳雨衣袖口；陈阳侧头看她，笑容舒展&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.7</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;happy&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_015&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dialogue&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">15</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.8</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.99</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;有些约定，会迟到，但永远不会缺席。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林小雨&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;画外音，语调轻柔笃定，背景雨声与笑声淡出，留白呼吸感&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.4</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hopeful&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_016&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.0</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.98</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;黑屏，字幕浮现：&#x27;雨会停，而故事才刚刚开始。&#x27;&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;纯黑背景，白色手写字体，轻微呼吸式淡入淡出&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.2</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;neutral&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;total_elements&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">57.4</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;dialogue_count&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;action_count&quot;</span><span class="punctuation">:</span> <span class="number">7</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;completeness_score&quot;</span><span class="punctuation">:</span> <span class="number">0.85</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;parsing_confidence&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;scenes&quot;</span><span class="punctuation">:</span> <span class="number">1.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;characters&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;dialogues&quot;</span><span class="punctuation">:</span> <span class="number">1.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;actions&quot;</span><span class="punctuation">:</span> <span class="number">1.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;overall&quot;</span><span class="punctuation">:</span> <span class="number">0.95</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;instructions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;generated_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10T19:18:43.759928&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mvp_1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;target_model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;total_prompts&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;converter_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLMPromptConverter&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;project_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AI视频项目&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;total_fragments&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">57.3</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;source_fragments&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                        <span class="string">&quot;frag_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_005&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_006&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_007&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_008&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_009&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_010_s1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_011_s2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_012_s3&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_013&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_014&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_015&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_016&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_017&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;frag_018&quot;</span></span><br><span class="line">                    <span class="punctuation">]</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;fragments&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cinematic wide shot, overcast sky low and heavy with misty drizzle, rain falling diagonally in fine, gossamer strands, slow downward camera tilt revealing glossy green sycamore (plane tree) leaves glistening with suspended water droplets, each bead perfectly refracting ambient gray light, shallow depth of field, hyper-detailed texture on wet leaf surfaces and rain-slicked pavement below, soft natural lighting, atmospheric perspective, 8K resolution, film grain, subtle motion blur on falling rain&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bright sunlight, clear sky, people, buildings, cars, text, logos, cartoonish style, oversaturated colors, sharp focus everywhere, static rain, dry leaves, fog machines, artificial lighting&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.2</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic, atmospheric, photorealistic, moody, slow-motion aesthetic, Fujifilm ETERNA film stock simulation&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic medium shot, rainy urban courtyard (scene_001), wet gray stone tiles glistening under overcast light,林小雨 (young East Asian woman, early 20s, disheveled black hair, tear-streaked face) crouched on left side of weathered wooden bench, hugging knees, wearing off-white knitted sweater with two distinct dark water stains on shoulders, shallow depth of field, soft natural lighting, subtle film grain, realistic skin texture, emotionally raw, melancholic atmosphere&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blurry, deformed hands, extra limbs, text, logos, cartoonish, anime style, bright sunlight, dry ground, smiling, crowd, motion blur, low resolution, oversaturated colors&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.8</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cinematic realism, Fujifilm ETERNA film stock aesthetic, shallow focus, emotionally grounded, atmospheric rain ambiance&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Extreme close-up of Lin Xiaoyu&#x27;s profile in rainy atmosphere: soft rain mist, dewy skin, long eyelashes glistening, one tear mixed with rain suspended at lower lash tip, subtle eye blink, slightly parted lips whispering, warm amber streetlight reflecting as two tiny shimmering highlights in her pupils, delicate throat movement, downward gaze shifting briefly toward blurred umbrella silhouette across street, fingers unconsciously crumpling a white handkerchief; cinematic shallow depth of field, soft focus background, chiaroscuro lighting, film grain texture, 8K ultra-detailed, realistic skin texture, naturalistic color grading&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text, words, logo, watermark, deformed eyes, asymmetrical face, extra limbs, blurry face, flat lighting, harsh shadows, overexposed, underexposed, cartoonish, anime, illustration, drawing, painting, low resolution, jpeg artifacts, duplicate objects&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">5.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cinematic, photorealistic, emotionally resonant, moody atmospheric realism, inspired by Wong Kar-wai and Hirokazu Kore-eda&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cinematic wide-angle aerial shot, slightly tilted downward, overcast rainy afternoon in a modern urban street corner; gray misty atmosphere, heavy rain creating shimmering wet asphalt surface with expansive shallow puddles reflecting blurred city buildings and muted neon signs; lone figure &#x27;Chen Yang&#x27; standing motionless at the intersection, wearing a dark raincoat and holding a black umbrella, silhouette subtly defined against cool-toned ambient light; shallow depth of field, photorealistic texture, high dynamic range, film grain, 35mm cinematic color grading, moody atmospheric perspective, 4K resolution, 24fps&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bright sunlight, clear sky, dry ground, crowds, vehicles in motion, text, logos, cartoonish style, low resolution, blurry face, oversaturated colors, lens flare, bokeh distractions, aerial drone wobble&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.6</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic, moody, atmospheric, photorealistic, rain-soaked urban realism&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_005&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic medium-side tracking shot, low angle, rain-soaked urban street at dusk, young East Asian man &#x27;Chen Yang&#x27; in dark yellow raincoat, hood slipping off, wet black hair clinging to forehead, flushed cheeks, rapid breathing, dynamic car drift with tire smoke and water spray, motion blur on wheels, dramatic chiaroscuro lighting, rain streaks on lens, shallow depth of field, hyper-detailed skin texture and fabric sheen, realistic wet pavement reflections&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cartoonish, anime, deformed face, extra limbs, text, logo, watermark, blurry face, static pose, dry ground, sunny weather, smiling, helmet, gloves, multiple people, daytime brightness, overexposed, low resolution&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.9</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cinematic realism, Denis Villeneuve meets Roger Deakins — moody, tactile, atmospheric, photorealistic motion&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_006&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic close-up of Chen Yang&#x27;s face, shallow depth of field, raindrops softly blurred in foreground, wet eyelashes glistening, subtle left eyebrow furrow, dilated pupils reflecting ambient light, soft natural lighting, skin with delicate water droplets and realistic texture, emotional restrained intensity, shot on ARRI Alexa, 8K, film grain, shallow focus, f/1.2 lens, moody atmospheric tone, scene_002 background subtly out-of-focus&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blurry eyes, deformed face, asymmetrical features, cartoonish, anime style, text, logos, multiple people, smiling, harsh shadows, overexposure, low resolution, plastic skin, dry face, no rain effect, studio lighting, wide shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.3</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cinematic realism, emotionally nuanced portraiture, atmospheric rain ambiance, shallow-focus intimacy&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_007&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cinematic wide-angle aerial shot of a rain-soaked urban street corner, shallow murky puddle reflecting heavy, low-hanging lead-gray clouds and sparse bare tree branches swaying gently; shallow depth of field, hyper-detailed water surface texture, moody natural lighting, overcast atmosphere, photorealistic, 8K resolution, film grain, subtle motion blur on reflections&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;people, vehicles, text, logos, bright colors, clear sky, dry ground, cartoonish style, sharp artificial lighting, lens flare, distortion, noise, low resolution&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.7</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic, photorealistic, atmospheric, moody, naturalistic lighting, shallow depth of field&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_008&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cinematic close-up of Lin Xiaoyu&#x27;s half-profile, soft natural lighting, slightly damp hair strands clinging to her temple, delicate eyelashes cast subtle shadows as eyes gaze downward with quiet intensity at a reflection of an open book in a rainwater puddle on wet pavement; shallow depth of field, film grain texture, muted earthy tones with gentle bokeh background, realistic skin texture and micro-details, 8K resolution, ultra-detailed, emotionally evocative, atmospheric stillness&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blurry, deformed face, extra limbs, text, logo, watermark, cartoonish, anime, low resolution, oversaturated colors, harsh lighting, glare, motion blur, smiling, full face, dry hair, empty puddle, no reflection&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cinematic realism, Fujifilm ETERNA film stock aesthetic, shallow focus, melancholic poetic tone&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_009&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic medium shot, slight low angle, young East Asian man &#x27;Chen Yang&#x27; standing at right side of a rainwater puddle, wearing deep blue waterproof raincoat, yellow food delivery helmet tilted in arm crook, wet urban street at dusk, soft ambient lighting, shallow depth of field, realistic texture, rain-slicked pavement reflections, subtle motion blur on dripping raincoat sleeve, detailed fabric folds, natural skin tones, muted color palette with accent on yellow helmet&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blurry, deformed face, extra limbs, text, logo, watermark, cartoonish, anime, low resolution, overexposed, underexposed, foggy, lens flare, people in background, smiling, static pose, dry ground, sunny weather&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.2</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic realism, moody atmospheric lighting, grounded urban drama, photorealistic detail&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Extreme close-up cinematic shot: young East Asian man&#x27;s wet fingertip, glistening water droplets refracting soft light, delicately pinching the edge of a creamy white terry cloth towel; towel fibers highly detailed and textured; slow upward motion as towel begins to cover the left side of a blue cloth-bound copy of &#x27;Stray Birds&#x27; (Rabindranath Tagore), visible embossed title; shallow depth of field, soft natural lighting, warm neutral color grade, macro detail on skin texture and fabric weave, studio-quality clarity.&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blurry, low resolution, deformed fingers, text errors, extra limbs, unnatural lighting, glare, motion blur, cartoonish, illustration, drawing, watermark, logo, noise, grain, dark shadows, overexposed highlights, floating objects, background elements, people other than subject, audio visualization&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.3</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic macro realism, Kodak Portra 400 film aesthetic, shallow focus, tactile material emphasis, quiet contemplative mood&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_011_s2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;extreme close-up of a young East Asian man (Chen Yang), soft natural lighting, delicate moisture glistening on a faint rain-shaped mark under his right eye, subtle throat movement as he speaks, eyelashes gently fluttering, a folded cotton towel lightly draped over the cover of &#x27;Stray Birds&#x27; (Rabindranath Tagore) in shallow focus foreground, shallow depth of field, blurred background revealing emerging wutong tree branch shadows drifting slowly into left shoulder area, cinematic color grading, film grain texture, 8K resolution, ultra-detailed skin and fabric texture&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text, logo, watermark, deformed eyes, asymmetrical face, blurry face, flat lighting, harsh shadows, motion blur on face, cartoonish, anime, low resolution, oversaturated colors, audio waveform, speech bubbles, people in background&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.6</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic, photorealistic, shallow depth of field, soft focus background, poetic realism, Studio Ghibli meets Wong Kar-wai lighting&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_012_s3&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic close-up of Chen Yang, motionless, face partially obscured by a damp towel covering a book cover; dappled wisteria branch shadows glide softly across his left shoulder; soft rim lighting on wet hair and ear contour; faint rain streak smudged below right eye; shallow depth of field with heavily blurred background; shadows gradually dissolve into out-of-focus bokeh; naturalistic lighting, film grain, 8K resolution, ultra-detailed skin texture, chiaroscuro contrast&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text, logo, watermark, deformed face, extra limbs, blurry eyes, harsh shadows, overexposure, underexposure, cartoonish, 3D render, animation, low resolution, noisy, flat lighting, symmetrical composition&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">1.5</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cinematic, moody, atmospheric, Fujifilm ETERNA film stock aesthetic, shallow focus, poetic realism&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_013&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cinematic wide-angle aerial view of a quiet urban street corner, exterior of a cozy café, wet bluish-gray cobblestone pavement glistening with subtle reflections, fine rain tapering off, scattered shallow puddles mirroring overcast sky and vintage façades, soft natural lighting, shallow depth of field, photorealistic texture, 8K resolution, film grain, gentle motion blur on falling raindrops&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;people, cars, text, logos, bright sunlight, snow, fog, cartoonish style, low resolution, motion artifacts, oversaturation, lens flare, drones in frame&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic, atmospheric, moody, realistic, rain-soaked urban stillness&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_014&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;medium shot, cinematic side-angle view, Lin Xiaoyu sitting on a wooden bench outside a cozy café, soft natural lighting, shallow depth of field, light rain residue — hair slightly damp, light blue knitted sweater with subtle water stains on shoulder, gentle breeze lifting delicate hair strands, warm ambient tones, realistic skin texture, detailed fabric weave, urban-chic background with blurred greenery and café signage, film grain, 35mm lens aesthetic&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blurry face, deformed hands, text, logos, cartoonish style, oversaturated colors, harsh shadows, motion blur, low resolution, extra limbs, unnatural lighting, audio elements, speech bubbles&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.5</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic realism, soft focus background, Kodak Portra 400 film emulation, gentle contrast, emotionally resonant stillness&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_015&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic medium over-the-shoulder shot from left rear of Lin Xiaoyu, framing Chen Yang standing half a step to her right, wearing a sleek black raincoat with subtle fabric texture and soft wet sheen, urban rainy night setting, dim ambient lighting with faint neon reflections on wet pavement, shallow depth of field, moody atmospheric haze, realistic skin tones, detailed facial expression focused and quiet, naturalistic posture, scene_004 background architecture visible in soft bokeh&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cartoonish, anime, deformed face, extra limbs, text, logo, watermark, blurry face, low resolution, flat lighting, bright daylight, sunny weather, umbrella, hat, smiling, motion blur, lens flare, oversaturated colors&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.8</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic, photorealistic, neo-noir mood, shallow depth of field, high-detail 4K&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_016&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic medium shot, low-angle tracking shot, two young adults rising together in unison —林小雨 (East Asian woman, early 20s, black bob cut, casual sweater) gripping a worn paperback book in her left hand; 陈阳 (East Asian man, early 20s, short dark hair, denim jacket) lifting his right arm naturally. Warm ambient daylight, soft focus background suggesting scene_004: modern minimalist indoor space with wooden floor and blurred bookshelves. Natural motion blur on rising movement, shallow depth of field, film grain, Kodak Portra color grading.&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blurry faces, deformed hands, extra limbs, text, logos, cartoonish style, low resolution, static pose, floating objects, overexposed lighting, harsh shadows, photorealistic CGI, anime style&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.1</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic, naturalistic lighting, shallow depth of field, subtle motion, Kodak Portra aesthetic&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_017&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cinematic close-up of two people standing side by side under a traditional eave, soft focus with shallow depth of field, golden hour sunlight slanting diagonally across their shoulders, warm volumetric light, delicate skin texture, subtle fabric detail on clothing, gentle ambient glow, serene expression, intimate composition, high-resolution film grain, naturalistic color grading, soft bokeh background hinting at scene_004 architecture&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blurry faces, distorted anatomy, text, logos, modern buildings, harsh shadows, overexposure, low resolution, cartoonish style, motion blur, multiple limbs, extra heads, unnatural lighting, saturated neon colors, audio elements, speech bubbles&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.8</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic, golden-hour realism, Fujifilm ETERNA palette, shallow-focus portraiture&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_018&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic black screen fade-in, pure black background, elegant white handwritten text appearing character-by-character, soft ink-like brush strokes with subtle wet-ink texture and gentle opacity bloom, serif-free calligraphic font, warm tonal contrast, ultra-high resolution, shallow depth of field, film grain, 35mm cinematic color grading, slow reveal timing, minimalist composition, &#x27;rain will...&#x27; partially visible&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;digital glitch, sharp edges, neon colors, shadows, lighting artifacts, text distortion, animation flicker, logos, people, objects, background elements, motion blur, cartoon style, low resolution, oversaturation&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.0</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic, minimalist, ink-wash elegance, slow-motion typographic reveal, Kodak Ektachrome film aesthetic&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;global_settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;style_consistency&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;use_common_negative_prompt&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;execution_suggestions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="string">&quot;按顺序生成片段&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;保持相同种子值以获得一致性&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;生成后检查片段衔接&quot;</span></span><br><span class="line">                <span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;audit_report&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;audited_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10T19:18:43.797714&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mvp_1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;auditor_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;basic&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;project_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AI视频项目&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fragment_count&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">57.3</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;failed&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;checks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;片段时长限制检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;passed&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;所有片段时长符合要求&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;checked_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10T19:18:43.797714&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;提示词内容检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;passed&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;所有提示词非空&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;checked_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10T19:18:43.797714&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;提示词长度检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;passed&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;所有提示词长度合适&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;checked_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10T19:18:43.797714&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;片段数量检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;passed&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;共18个片段&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;checked_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10T19:18:43.797714&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;模型支持检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;passed&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;所有模型都受支持&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;checked_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10T19:18:43.797714&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;needs_review&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;整体提示词具备基础画面感和分镜逻辑，但存在三类主要风险：1）局部提示词不完整或含无效引用（scene_001），属功能性错误；2）角色指代与动态细节缺失削弱叙事连贯性；3）&#x27;cinematic&#x27;泛化使用导致风格锚点模糊。建议优先修复frag_002的scene引用和frag_001的截断问题，再统一风格定义与角色命名规范。当前状态需人工复核后方可进入生成阶段。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;checked_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10T19:19:01.113977&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;violations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;rule_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llm_coherence&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_001 提示词以逗号截断，&#x27;rain falling diagonally in fine,...&#x27; 不完整，缺少关键修饰（如 &#x27;fine rain&#x27; 或 &#x27;fine droplets&#x27;），语义模糊，影响AI理解。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;warning&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;suggestion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;补全描述，例如：&#x27;rain falling diagonally in fine, glistening streaks&#x27;；避免省略号结尾，确保语法完整、意象明确。&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;rule_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llm_coherence&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_002 引用未定义的 &#x27;scene_001&#x27;，AI视频模型无法识别外部场景标签，导致生成不可控或报错。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;error&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;suggestion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;删除 &#x27;scene_001&#x27;，改用具象环境描述，如 &#x27;a narrow rainy urban courtyard with potted bamboo and weathered brick walls&#x27;。&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;rule_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llm_coherence&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1 使用 &#x27;Extreme close-up cinematic shot&#x27; 开头，但未指定主体人物姓名或可识别特征（如 &#x27;Chen Yang&#x27;s wet fingertip&#x27;），与前序角色命名习惯不一致，易造成身份混淆。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;warning&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;suggestion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;统一角色指代，改为 &#x27;Extreme close-up of Chen Yang&#x27;s wet fingertip...&#x27;，确保角色连贯性与可识别性。&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;rule_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llm_coherence&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1 时长仅2.3秒，虽在0.5–5秒范围内，但作为极端特写且无动作/变化提示（如水滴滑落、微颤等），过短可能导致AI生成帧数不足、画面呆滞或被截断。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;warning&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;suggestion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;延长至3.0–3.5秒，并补充动态细节，如 &#x27;water droplet slowly sliding down his index fingertip&#x27;。&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;rule_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llm_coherence&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;多片段重复使用 &#x27;cinematic&#x27; 前缀（如 frag_001/002/004/005/006/007/008/009/010_s1），冗余且未定义具体电影风格（如 &#x27;Kurosawa-inspired high-contrast B&amp;W&#x27; 或 &#x27;Wong Kar-wai saturated neon-noir&#x27;），导致风格空泛、一致性弱。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;warning&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;all&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;suggestion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;在项目级指令中统一声明视觉风格（如 &#x27;Style: Moody, desaturated color grade with shallow DoF and slow-motion rain physics, inspired by &#x27;In the Mood for Love&#x27;&#x27;），各片段提示词聚焦构图/动作/情绪，避免重复‘cinematic’。&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;total_checks&quot;</span><span class="punctuation">:</span> <span class="number">6</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;passed_checks&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;warnings&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;errors&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fragments_checked&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;info&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;warning&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;moderate&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;major&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;critical&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;failed_checks&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;pass_rate&quot;</span><span class="punctuation">:</span> <span class="number">0.8333333333333334</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;quality_score&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;total_violations&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;has_issues&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;needs_human_review&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;suggestions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="string">&quot;检查所有片段时长是否≤5秒&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;确保没有空提示词&quot;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;conclusion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;发现1个错误，无法继续视频生成&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;score&quot;</span><span class="punctuation">:</span> <span class="number">100.0</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;detailed_analysis&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;violations_by_severity&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;info&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;warning&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_001 提示词以逗号截断，&#x27;rain falling diagonally in fine,...&#x27; 不完整，缺少关键修饰（如 &#x27;fine rain&#x27; 或 &#x27;fine droplets&#x27;），语义模糊，影响AI理解。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;suggestion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;补全描述，例如：&#x27;rain falling diagonally in fine, glistening streaks&#x27;；避免省略号结尾，确保语法完整、意象明确。&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1 使用 &#x27;Extreme close-up cinematic shot&#x27; 开头，但未指定主体人物姓名或可识别特征（如 &#x27;Chen Yang&#x27;s wet fingertip&#x27;），与前序角色命名习惯不一致，易造成身份混淆。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;suggestion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;统一角色指代，改为 &#x27;Extreme close-up of Chen Yang&#x27;s wet fingertip...&#x27;，确保角色连贯性与可识别性。&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1 时长仅2.3秒，虽在0.5–5秒范围内，但作为极端特写且无动作/变化提示（如水滴滑落、微颤等），过短可能导致AI生成帧数不足、画面呆滞或被截断。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;suggestion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;延长至3.0–3.5秒，并补充动态细节，如 &#x27;water droplet slowly sliding down his index fingertip&#x27;。&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;多片段重复使用 &#x27;cinematic&#x27; 前缀（如 frag_001/002/004/005/006/007/008/009/010_s1），冗余且未定义具体电影风格（如 &#x27;Kurosawa-inspired high-contrast B&amp;W&#x27; 或 &#x27;Wong Kar-wai saturated neon-noir&#x27;），导致风格空泛、一致性弱。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;all&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;suggestion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;在项目级指令中统一声明视觉风格（如 &#x27;Style: Moody, desaturated color grade with shallow DoF and slow-motion rain physics, inspired by &#x27;In the Mood for Love&#x27;&#x27;），各片段提示词聚焦构图/动作/情绪，避免重复‘cinematic’。&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;moderate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;major&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;critical&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_002 引用未定义的 &#x27;scene_001&#x27;，AI视频模型无法识别外部场景标签，导致生成不可控或报错。&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;suggestion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;删除 &#x27;scene_001&#x27;，改用具象环境描述，如 &#x27;a narrow rainy urban courtyard with potted bamboo and weathered brick walls&#x27;。&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fragment_violation_summary&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;total_fragments_with_issues&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;high_risk_fragments&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="string">&quot;frag_002&quot;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;fragment_details&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;frag_001&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                <span class="punctuation">&#123;</span></span><br><span class="line">                                    <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;warning&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_001 提示词以逗号截断，&#x27;rain falling diagonally in fine,...&#x27; 不完整，缺少关键修饰（如 &#x27;fine rain&#x27; 或 &#x27;fine droplets&#x27;），语义模糊，影响AI理解。&quot;</span></span><br><span class="line">                                <span class="punctuation">&#125;</span></span><br><span class="line">                            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;frag_002&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                <span class="punctuation">&#123;</span></span><br><span class="line">                                    <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;error&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_002 引用未定义的 &#x27;scene_001&#x27;，AI视频模型无法识别外部场景标签，导致生成不可控或报错。&quot;</span></span><br><span class="line">                                <span class="punctuation">&#125;</span></span><br><span class="line">                            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;frag_010_s1&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                <span class="punctuation">&#123;</span></span><br><span class="line">                                    <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;warning&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1 使用 &#x27;Extreme close-up cinematic shot&#x27; 开头，但未指定主体人物姓名或可识别特征（如 &#x27;Chen Yang&#x27;s wet fingertip&#x27;），与前序角色命名习惯不一致，易造成身份混淆。&quot;</span></span><br><span class="line">                                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="punctuation">&#123;</span></span><br><span class="line">                                    <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;warning&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_010_s1 时长仅2.3秒，虽在0.5–5秒范围内，但作为极端特写且无动作/变化提示（如水滴滑落、微颤等），过短可能导致AI生成帧数不足、画面呆滞或被截断。&quot;</span></span><br><span class="line">                                <span class="punctuation">&#125;</span></span><br><span class="line">                            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;all&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                <span class="punctuation">&#123;</span></span><br><span class="line">                                    <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;warning&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="attr">&quot;rule_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LLM连贯性检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;多片段重复使用 &#x27;cinematic&#x27; 前缀（如 frag_001/002/004/005/006/007/008/009/010_s1），冗余且未定义具体电影风格（如 &#x27;Kurosawa-inspired high-contrast B&amp;W&#x27; 或 &#x27;Wong Kar-wai saturated neon-noir&#x27;），导致风格空泛、一致性弱。&quot;</span></span><br><span class="line">                                <span class="punctuation">&#125;</span></span><br><span class="line">                            <span class="punctuation">]</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;recommended_actions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                        <span class="string">&quot;修复根本性错误&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;停止当前流程&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;重新开始整个工作流&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="string">&quot;修复: LLM连贯性检查 - 删除 &#x27;scene_001&#x27;，改用具象环境描述，如 &#x27;a narrow rainy urban courtyard with potted bamboo and weathered brick walls&#x27;。&quot;</span></span><br><span class="line">                    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;timeline_impact&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;impact&quot;</span><span class="punctuation">:</span> <span class="string">&quot;完全阻塞&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;estimated_delay&quot;</span><span class="punctuation">:</span> <span class="string">&quot;未知&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;priority&quot;</span><span class="punctuation">:</span> <span class="string">&quot;最高&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;can_proceed&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;continuity_issues&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;processing_stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;completed_stages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="string">&quot;PARSER&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;SEGMENTER&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;SPLITTER&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;CONVERTER&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;AUDITOR&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;CONTINUITY&quot;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;stage_count&quot;</span><span class="punctuation">:</span> <span class="number">6</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;has_final_output&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;current_node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;generate_output&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;current_stage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completed&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;global_loops&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;global_max_loops&quot;</span><span class="punctuation">:</span> <span class="number">40</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;error_count&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;fragment_stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;total_fragments&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;avg_duration&quot;</span><span class="punctuation">:</span> <span class="number">3.18</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;fixed_by_output_fixer&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;errors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;processing_stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;task_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HL202602101908249720&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;workflow_status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completed&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;error_message&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;warnings&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;processing_time_ms&quot;</span><span class="punctuation">:</span> <span class="number">409569</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10T19:15:03.436090&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;completed_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2026-02-10T19:21:53.005910&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="集成方式">集成方式</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>安装依赖</strong>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载 whl 包，选择指定版本（v0.1.1-beta）</span></span><br><span class="line"><span class="comment"># https://github.com/HengLine/video-shot-agent/releases/download/v0.1.1-beta/hengshot-0.1.1-py3-none-any.whl</span></span><br><span class="line">pip install hengshot-0.1.1-py3-none-any.whl</span><br><span class="line"></span><br><span class="line"><span class="comment"># 目前没有发布到 PyPI，不支持以下方式</span></span><br><span class="line"><span class="comment"># pip install hengshot</span></span><br><span class="line"><span class="comment"># 或者包含特定依赖</span></span><br><span class="line"><span class="comment"># pip install hengshot[all]  # 全部依赖</span></span><br><span class="line"><span class="comment"># pip install hengshot[llm]  # 仅LLM相关</span></span><br><span class="line"><span class="comment"># pip install hengshot[web]  # 仅Web相关</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p><strong>环境配置</strong>：</p>
<ol>
<li class="lvl-5">复制示例文件：cp .env.example .env</li>
<li class="lvl-5">编辑 .env 文件，填入真实配置</li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .env - 实际配置文件</span></span><br><span class="line"><span class="comment"># ================= 应用配置 =================</span></span><br><span class="line"><span class="attr">APP__ENVIRONMENT</span>=<span class="string">production</span></span><br><span class="line"><span class="attr">APP__LANGUAGE</span>=<span class="string">zh</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># ================= LLM默认配置 =================</span></span><br><span class="line"><span class="attr">LLM__DEFAULT__BASE_URL</span>=<span class="string">https://api.openai.com/v1</span></span><br><span class="line"><span class="attr">LLM__DEFAULT__API_KEY</span>=<span class="string">sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span></span><br><span class="line"><span class="attr">LLM__DEFAULT__MODEL_NAME</span>=<span class="string">gpt-4-turbo-preview</span></span><br><span class="line"><span class="attr">LLM__DEFAULT__TEMPERATURE</span>=<span class="string">0.7</span></span><br><span class="line"><span class="attr">LLM__DEFAULT__TIMEOUT</span>=<span class="string">30</span></span><br><span class="line"><span class="attr">LLM__DEFAULT__MAX_RETRIES</span>=<span class="string">3</span></span><br><span class="line"><span class="attr">LLM__DEFAULT__MAX_TOKENS</span>=<span class="string">4000</span></span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p><strong>作为python 库使用</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">basic_usage</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;基础用法示例&quot;&quot;&quot;</span></span><br><span class="line">    script = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    场景：现代办公室</span></span><br><span class="line"><span class="string">    时间：下午3点</span></span><br><span class="line"><span class="string">    人物：小李（程序员）</span></span><br><span class="line"><span class="string">    动作：小李正在写代码，突然接到电话，表情惊讶</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 创建自定义配置 LLM</span></span><br><span class="line">    custom_config = HengLineConfig(</span><br><span class="line">        model_name=<span class="string">&quot;gpt-4&quot;</span>,</span><br><span class="line">        base_url=<span class="string">&quot;http://localhost:11434&quot;</span>,  <span class="comment"># 假设本地部署了 Ollama</span></span><br><span class="line">        temperature=<span class="number">0.2</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 简单调用</span></span><br><span class="line">    result = <span class="keyword">await</span> generate_storyboard(</span><br><span class="line">        script_text=script,</span><br><span class="line">        config=custom_config</span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;生成完成，任务ID: <span class="subst">&#123;result.get(<span class="string">&#x27;task_id&#x27;</span>)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;生成结果: <span class="subst">&#123;result.get(<span class="string">&#x27;success&#x27;</span>, <span class="literal">False</span>)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;分镜片段: <span class="subst">&#123;result.get(<span class="string">&#x27;data&#x27;</span>, &#123;&#125;</span>)&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p><strong>集成到Web应用</strong>（API）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/api/generate-storyboard&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">generate_storyboard_endpoint</span>(<span class="params">script_text: <span class="built_in">str</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    生成视频分镜的Web API端点</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 创建自定义配置 LLM</span></span><br><span class="line">    custom_config = HengLineConfig(</span><br><span class="line">        model_name=<span class="string">&quot;gpt-4&quot;</span>,</span><br><span class="line">        base_url=<span class="string">&quot;http://localhost:11434&quot;</span>,  <span class="comment"># 假设本地部署了 Ollama</span></span><br><span class="line">        temperature=<span class="number">0.2</span></span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">await</span> generate_storyboard(</span><br><span class="line">            script_text=script_text,</span><br><span class="line">            config=custom_config</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">raise</span> HTTPException(status_code=<span class="number">500</span>, detail=<span class="string">f&quot;生成失败: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p><strong>集成到 LangGraph 工作流节点</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Dict</span>, <span class="type">Any</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> langgraph.graph <span class="keyword">import</span> StateGraph, END</span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel, Field</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> video_shot_breakdown.hengline <span class="keyword">import</span> generate_storyboard</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义状态结构</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StoryboardState</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    script_text: <span class="built_in">str</span> = Field(description=<span class="string">&quot;输入剧本文本&quot;</span>)</span><br><span class="line">    task_id: <span class="built_in">str</span> = Field(default=<span class="literal">None</span>, description=<span class="string">&quot;任务ID&quot;</span>)</span><br><span class="line">    storyboard_result: <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>] = Field(default=<span class="literal">None</span>, description=<span class="string">&quot;分镜生成结果&quot;</span>)</span><br><span class="line">    next_step: <span class="built_in">str</span> = Field(default=<span class="string">&quot;&quot;</span>, description=<span class="string">&quot;下一步操作指示&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建分镜生成节点</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">storyboard_generator_node</span>(<span class="params">state: StoryboardState</span>) -&gt; <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    LangGraph 工作流中的分镜生成节点</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        result = <span class="keyword">await</span> generate_storyboard(</span><br><span class="line">            script_text=state.script_text,</span><br><span class="line">            task_id=state.task_id</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&quot;storyboard_result&quot;</span>: result,</span><br><span class="line">            <span class="string">&quot;next_step&quot;</span>: <span class="string">&quot;storyboard_generated&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&quot;storyboard_result&quot;</span>: &#123;<span class="string">&quot;error&quot;</span>: <span class="built_in">str</span>(e)&#125;,</span><br><span class="line">            <span class="string">&quot;next_step&quot;</span>: <span class="string">&quot;error&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建工作流示例</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_storyboard_workflow</span>():</span><br><span class="line">    workflow = StateGraph(StoryboardState)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 添加节点</span></span><br><span class="line">    workflow.add_node(<span class="string">&quot;generate_storyboard&quot;</span>, storyboard_generator_node)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设置入口点</span></span><br><span class="line">    workflow.set_entry_point(<span class="string">&quot;generate_storyboard&quot;</span>)</span><br><span class="line">    workflow.add_edge(<span class="string">&quot;generate_storyboard&quot;</span>, END)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> workflow.<span class="built_in">compile</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">run_langgraph_example</span>():</span><br><span class="line">    app = create_storyboard_workflow()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 初始化状态</span></span><br><span class="line">    initial_state = StoryboardState(</span><br><span class="line">        script_text=<span class="string">&quot;一个男孩在公园里放风筝，天空很蓝...&quot;</span>,</span><br><span class="line">        task_id=<span class="string">&quot;storyboard_task_001&quot;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 运行工作流</span></span><br><span class="line">    final_state = <span class="keyword">await</span> app.ainvoke(initial_state)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> final_state</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>响应：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">     <span class="attr">&quot;instructions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">     <span class="attr">&quot;continuity_issues&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">     <span class="attr">&quot;audit_report&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;errors&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;task_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HL202602101908249720&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;workflow_status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completed&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li class="lvl-2">
<p><strong>集成到A2A系统</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Dict</span>, <span class="type">Any</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> video_shot_breakdown.hengline <span class="keyword">import</span> generate_storyboard</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A2ATask</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;A2A任务数据类&quot;&quot;&quot;</span></span><br><span class="line">    task_id: <span class="built_in">str</span></span><br><span class="line">    script_content: <span class="built_in">str</span></span><br><span class="line">    priority: <span class="built_in">int</span> = <span class="number">1</span></span><br><span class="line">    metadata: <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StoryboardA2AAgent</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;分镜生成的A2A代理&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, agent_id: <span class="built_in">str</span></span>):</span><br><span class="line">        <span class="variable language_">self</span>.agent_id = agent_id</span><br><span class="line">        <span class="variable language_">self</span>.task_queue = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">process_task</span>(<span class="params">self, task: A2ATask</span>) -&gt; <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        处理A2A任务</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 调用分镜生成智能体</span></span><br><span class="line">            result = <span class="keyword">await</span> generate_storyboard(</span><br><span class="line">                script_text=task.script_content,</span><br><span class="line">                task_id=task.task_id</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">&quot;agent_id&quot;</span>: <span class="variable language_">self</span>.agent_id,</span><br><span class="line">                <span class="string">&quot;task_id&quot;</span>: task.task_id,</span><br><span class="line">                <span class="string">&quot;status&quot;</span>: <span class="string">&quot;completed&quot;</span>,</span><br><span class="line">                <span class="string">&quot;result&quot;</span>: result,</span><br><span class="line">                <span class="string">&quot;metadata&quot;</span>: task.metadata <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">&quot;agent_id&quot;</span>: <span class="variable language_">self</span>.agent_id,</span><br><span class="line">                <span class="string">&quot;task_id&quot;</span>: task.task_id,</span><br><span class="line">                <span class="string">&quot;status&quot;</span>: <span class="string">&quot;failed&quot;</span>,</span><br><span class="line">                <span class="string">&quot;error&quot;</span>: <span class="built_in">str</span>(e)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A2AOrchestrator</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;A2A系统编排器&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.agents = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">register_agent</span>(<span class="params">self, agent: StoryboardA2AAgent</span>):</span><br><span class="line">        <span class="variable language_">self</span>.agents[agent.agent_id] = agent</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">dispatch_task</span>(<span class="params">self, task: A2ATask, agent_id: <span class="built_in">str</span> = <span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        分发任务到指定代理或选择合适的代理</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> agent_id <span class="keyword">and</span> agent_id <span class="keyword">in</span> <span class="variable language_">self</span>.agents:</span><br><span class="line">            agent = <span class="variable language_">self</span>.agents[agent_id]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 简单的负载均衡：选择第一个可用代理</span></span><br><span class="line">            agent = <span class="built_in">list</span>(<span class="variable language_">self</span>.agents.values())[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">await</span> agent.process_task(task)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">a2a_demo</span>():</span><br><span class="line">    <span class="comment"># 创建编排器</span></span><br><span class="line">    orchestrator = A2AOrchestrator()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 注册分镜生成代理</span></span><br><span class="line">    storyboard_agent = StoryboardA2AAgent(agent_id=<span class="string">&quot;storyboard_agent_001&quot;</span>)</span><br><span class="line">    orchestrator.register_agent(storyboard_agent)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建任务</span></span><br><span class="line">    task = A2ATask(</span><br><span class="line">        task_id=<span class="string">&quot;a2a_task_001&quot;</span>,</span><br><span class="line">        script_content=<span class="string">&quot;早晨，一个女孩在咖啡馆读书，阳光透过窗户...&quot;</span>,</span><br><span class="line">        priority=<span class="number">1</span>,</span><br><span class="line">        metadata=&#123;<span class="string">&quot;user_id&quot;</span>: <span class="string">&quot;user123&quot;</span>, <span class="string">&quot;project&quot;</span>: <span class="string">&quot;短片制作&quot;</span>&#125;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 分发并处理任务</span></span><br><span class="line">    result = <span class="keyword">await</span> orchestrator.dispatch_task(task)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;任务处理结果: <span class="subst">&#123;result&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="技术架构（多智能体）">技术架构（多智能体）</h2>
<p><strong>智能体框架</strong>: LangGraph（专为多智能体状态机设计）</p>
<pre class="mermaid">graph TB
    %% 输入输出
    Input[原始剧本文本] --> Parser
    FinalOutput[AI视频指令] --> End[完成]
    
    %% 核心处理流程
    subgraph "处理流程"
        Parser[剧本解析智能体]
        Splitter[镜头拆分智能体]
        Fragmenter[视频分段智能体]
        Converter[指令转换智能体]
        Auditor[质量审查智能体]
    end
    
    %% 数据流
    Parser --> Splitter
    Splitter --> Fragmenter
    Fragmenter --> Converter
    Converter --> Auditor
    Auditor --> FinalOutput
    
    %% 支持服务
    subgraph "支持服务"
        LLM[LLM服务]
        StateDB[(状态存储)]
    end
    
    %% 服务调用
    Parser -.-> LLM
    Converter -.-> LLM
    Fragmenter -.-> StateDB
    Converter -.-> StateDB</pre>
<table>
<thead>
<tr>
<th>智能体</th>
<th>职责</th>
<th>输入 → 输出</th>
<th>要点</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>1. 剧本解析智能体</strong></td>
<td>将任意格式剧本统一解析为结构化叙事单元，提取场景、角色、动作、对话、道具、情绪等</td>
<td>原始文本 → 结构化序列（场景、角色、对话等）</td>
<td>仅提取基本元素，<strong>不做复杂时长估算</strong></td>
</tr>
<tr>
<td><strong>2. 镜头拆分智能体</strong></td>
<td>基于情感强度、节奏变化等，将剧本划分为最小可独立表达的镜头单元，并分配合理时长</td>
<td>结构化对象 → 带时间戳的镜头序列JSON</td>
<td>基于<strong>简单规则</strong>（如场景变化、对话切换）拆分，不涉及复杂镜头语言</td>
</tr>
<tr>
<td><strong>3. 视频分段智能体</strong></td>
<td>将镜头按5秒粒度切分，优先在动作静止点切割，输出符合AI视频模型要求的片段序列</td>
<td>镜头序列 → 符合AI视频长度限制的片段序列</td>
<td>只对&gt;5秒镜头 <strong>简单切分</strong>，不做镜头智能合并等复杂操作</td>
</tr>
<tr>
<td><strong>4. 指令转换智能体</strong></td>
<td>为每个AI片段生成模型适配的文生视频提示词（Prompt），包含构图、光线、运动等</td>
<td>片段内容 + 连续性锚点 → 可直接用于AI视频生成指令</td>
<td><strong>使用“模板+LLM优化”</strong> 的方式生成提示词，降低复杂度</td>
</tr>
<tr>
<td><strong>5. 质量审查智能体</strong></td>
<td>对全序列进行连贯性、时长合规性、角色漂移等检查，输出修正建议</td>
<td>AI片段序列 → <strong>审查报告</strong> （通过 / 修正建议列表）</td>
<td><strong>只检查硬性规则</strong>（如时长、基本连续性），不做深度美学判断</td>
</tr>
</tbody>
</table>
<p><strong>全流程协作序列图</strong>：</p>
<pre class="mermaid">sequenceDiagram
    participant User as 用户
    participant System as 流程编排器
    participant Parser as 剧本解析
    participant Splitter as 镜头拆分
    participant Fragmenter as 视频分段
    participant Converter as 指令转换
    participant Auditor as 质量审查
    
    User->>System: 提交剧本
    System->>Parser: 开始解析
    Parser-->>System: 返回结构化剧本
    System->>Splitter: 开始镜头拆分
    Splitter-->>System: 返回镜头序列
    System->>Fragmenter: 开始5秒分段
    Fragmenter-->>System: 返回片段序列
    System->>Converter: 生成AI指令
    Converter-->>System: 返回Prompt序列
    System->>Auditor: 开始质量审查
    Auditor-->>System: 返回审查结果
    
    alt 审查通过
        System->>User: 返回完整AI指令
    else 审查不通过
        System->>User: 返回错误和建议
    end</pre>
<h3 id="1-剧本解析智能体">1.剧本解析智能体</h3>
<p><strong>核心目标</strong>：将任意格式剧本转换为<strong>统一的结构化中间表示</strong>，执行剧本的格式转换和语义提取。</p>
<blockquote>
<p>支持四种类型的剧本：</p>
<ul class="lvl-1">
<li class="lvl-2">自然语言剧本</li>
<li class="lvl-2">标准电影剧本</li>
<li class="lvl-2">AI生成的分镜剧本</li>
<li class="lvl-2">结构化场景剧本</li>
</ul>
</blockquote>
<pre class="mermaid">graph TD
    A[原始剧本文本] --> B(LLM解析)
    B --> C{解析成功?}
    C -->|是| D[结构化JSON]
    C -->|否| E[错误处理]
    D --> F[添加元数据]
    F --> G[输出结构化剧本]
    E --> H[返回错误信息]</pre>
<blockquote>
<ol>
<li class="lvl-3">
<p>自动识别输入格式，根据不同的剧本做不同处理</p>
</li>
<li class="lvl-3">
<p>使用LLM解析，通过剧本复杂度、类型、解析置信度</p>
</li>
<li class="lvl-3">
<p>提取语义元素（角色、动作、对话、场景）</p>
</li>
<li class="lvl-3">
<p>转换为统一数据结构</p>
</li>
<li class="lvl-3">
<p>保持原始语义，不添加时间信息</p>
</li>
</ol>
</blockquote>
<pre class="mermaid">sequenceDiagram
    participant User as 用户
    participant API as 流程编排器
    participant Parser as 剧本解析智能体
    participant LLM as LLM服务
    
    User->>API: POST 接口 {text: "剧本文本"}
    API->>Parser: 调用解析任务
    Parser->>LLM: 发送解析请求
    Note over Parser,LLM: 使用提示词让LLM提取<br/>场景、角色、对话、动作
    LLM-->>Parser: 返回结构化JSON
    Parser->>Parser: 添加元数据
    Parser-->>API: 返回解析结果
    API-->>User: 返回结构化剧本</pre>
<p><strong>输出示例</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;parsed_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-01-20T10:30:00Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mvp_1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;source_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;深夜对话&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;characters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中年男性，神情紧张&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;key_traits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;穿灰色夹克&quot;</span><span class="punctuation">,</span> <span class="string">&quot;声音低沉&quot;</span><span class="punctuation">,</span> <span class="string">&quot;性格谨慎&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;年轻女性，警觉性高&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;key_traits&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;长发&quot;</span><span class="punctuation">,</span> <span class="string">&quot;穿黑色外套&quot;</span><span class="punctuation">,</span> <span class="string">&quot;敏锐观察力&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scenes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;客厅&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;昏暗的客厅，只有一盏台灯亮着&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;time_of_day&quot;</span><span class="punctuation">:</span> <span class="string">&quot;night&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;elements&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ACTION&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;estimated_duration&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.9</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;环顾四周&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三紧张地环顾客厅四周&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.7</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fear&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DIALOGUE&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;estimated_duration&quot;</span><span class="punctuation">:</span> <span class="number">2.0</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.95</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;你听到了吗？&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三压低声音询问李四&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.6</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fear&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ACTION&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;estimated_duration&quot;</span><span class="punctuation">:</span> <span class="number">4.0</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.85</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;走向窗边&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四小心翼翼地走向窗边查看&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;neutral&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_004&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SCENE&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;estimated_duration&quot;</span><span class="punctuation">:</span> <span class="number">2.5</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;窗外传来微弱声响&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;窗外传来微弱的、类似树枝摩擦的声音&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.4</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;neutral&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;客厅窗边&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;窗帘微动，月光从缝隙透入&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;time_of_day&quot;</span><span class="punctuation">:</span> <span class="string">&quot;night&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;elements&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;elem_005&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DIALOGUE&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;sequence&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;estimated_duration&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.9</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;外面好像有人...&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;target_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四压低声音，语气紧张&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;intensity&quot;</span><span class="punctuation">:</span> <span class="number">0.7</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;emotion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fear&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;total_elements&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">14.5</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dialogue_count&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;action_count&quot;</span><span class="punctuation">:</span> <span class="number">3</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>存在的问题和挑战</strong>：</p>
<blockquote>
<p>AI的顺序识别能力</p>
<ul class="lvl-1">
<li class="lvl-2"><strong>优势</strong>：理解语义关系，推断逻辑顺序</li>
<li class="lvl-2"><strong>劣势</strong>：无法精确对应原始文本位置</li>
<li class="lvl-2"><strong>准确率</strong>：约70-85%（取决于剧本复杂度）</li>
</ul>
</blockquote>
<p>解决方案：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">mvp_order_handling</span>(<span class="params">raw_text: <span class="built_in">str</span></span>):</span><br><span class="line">    <span class="comment"># 1. 让AI解析，明确要求保持顺序</span></span><br><span class="line">    ai_result = parse_with_ai(raw_text, instruction=<span class="string">&quot;保持原始顺序&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 2. 添加简单的位置标记</span></span><br><span class="line">    <span class="keyword">for</span> element <span class="keyword">in</span> ai_result[<span class="string">&quot;elements&quot;</span>]:</span><br><span class="line">        element[<span class="string">&quot;order_index&quot;</span>] = estimate_position(raw_text, element)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 3. 按位置标记排序</span></span><br><span class="line">    sorted_elements = sort_by_order_index(ai_result[<span class="string">&quot;elements&quot;</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 4. 标记需要人工检查的元素</span></span><br><span class="line">    <span class="keyword">for</span> element <span class="keyword">in</span> sorted_elements:</span><br><span class="line">        <span class="keyword">if</span> element.get(<span class="string">&quot;order_confidence&quot;</span>, <span class="number">1</span>) &lt; <span class="number">0.6</span>:</span><br><span class="line">            element[<span class="string">&quot;needs_human_review&quot;</span>] = <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&quot;elements&quot;</span>: sorted_elements,</span><br><span class="line">        <span class="string">&quot;order_quality&quot;</span>: calculate_order_quality(sorted_elements),</span><br><span class="line">        <span class="string">&quot;review_needed&quot;</span>: <span class="built_in">any</span>(e.get(<span class="string">&quot;needs_human_review&quot;</span>) <span class="keyword">for</span> e <span class="keyword">in</span> sorted_elements)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>演进路径与挑战：</p>
<pre class="mermaid">graph LR
    A[MVP: 简单顺序<br/>LLM推断+数组索引] --> B[V1.1: 增强位置<br/>后端文本匹配]
    B --> C[V1.2: 精确位置<br/>分词+偏移计算]
    C --> D[V2.0: 智能验证<br/>多模型交叉验证]
    
    style A fill:#e1f5fe
    style D fill:#c8e6c9</pre>
<h3 id="2-镜头拆分智能体">2.镜头拆分智能体</h3>
<p><strong>核心目标</strong>：将结构化剧本拆分为视觉上独立的镜头单元，考虑情感节奏和时长合理性</p>
<pre class="mermaid">flowchart TD
    A[结构化剧本] --> B[提取场景]
    B --> C[遍历场景元素]
    C --> D{元素类型?}
    D -->|新场景| E[创建新镜头]
    D -->|对话切换| F[创建新镜头]
    D -->|同一动作| G[扩展当前镜头]
    E --> H[添加到镜头序列]
    F --> H
    G --> H
    H --> I[计算时间戳]
    I --> J[输出镜头序列]</pre>
<p><strong>输出示例</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;generated_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-01-20T10:35:00Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mvp_1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;parser_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_splitter_v1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;script_reference&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;深夜对话&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_elements&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;original_duration&quot;</span><span class="punctuation">:</span> <span class="number">14.5</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;shots&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三紧张地环顾客厅四周&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;medium_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;elem_001&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三压低声音询问李四&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;close_up&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;elem_002&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.9</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;scene_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四小心翼翼地走向窗边查看&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">5.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shot_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;medium_shot&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;elem_003&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;confidence&quot;</span><span class="punctuation">:</span> <span class="number">0.8</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;shot_count&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">9.0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;avg_shot_duration&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;close_up_count&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;wide_shot_count&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>存在的问题和挑战</strong>：时长的精准估算（动作、对话、场景等），MVP演进路径：</p>
<pre class="mermaid">graph LR
    A[MVP: 固定参数<br/>简单分类<br/>接受30%误差] --> B[V1: 可配置参数<br/>情感检测<br/>误差20%]
    B --> C[V2: 机器学习模型<br/>个性化适配<br/>误差15%]
    C --> D[V3: 实时调整<br/>根据生成反馈优化<br/>误差10%]
    
    style A fill:#e1f5fe
    style D fill:#c8e6c9</pre>
<h3 id="3-视频分段智能体">3.视频分段智能体</h3>
<p><strong>核心目标</strong>:：将镜头序列按5秒粒度切分，确保每个片段符合AI视频模型限制</p>
<pre class="mermaid">sequenceDiagram
    participant Splitter as 视频分段智能体
    participant Logic as 切分逻辑
    participant CM as 简单连续性管理
    
    Splitter->>Logic: 镜头序列输入
    Logic->>Logic: 遍历每个镜头
    Logic->>Logic: 检查时长是否超过5秒
    alt 时长≤5秒
        Logic->>CM: 获取连续性信息
        CM-->>Logic: 返回角色/场景状态
        Logic->>Logic: 创建单个片段
    else 时长>5秒
        Logic->>Logic: 计算切分点
        Logic->>Logic: 创建多个片段
        Logic->>CM: 为每个片段获取状态
        CM-->>Logic: 返回状态信息
    end
    Logic-->>Splitter: 返回片段序列
    Splitter->>Splitter: 组装最终输出</pre>
<p><strong>输出示例</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;generated_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-01-20T10:40:00Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mvp_1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;max_fragment_duration&quot;</span><span class="punctuation">:</span> <span class="number">5.0</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;source_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;shot_count&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;original_duration&quot;</span><span class="punctuation">:</span> <span class="number">9.0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;深夜对话&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fragments&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;elem_001&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景：张三紧张地环顾四周&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三紧张地环顾四周&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;elem_002&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;特写：张三低声询问&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三压低声音询问李四&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;shot_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shot_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;element_ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;elem_003&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;start_time&quot;</span><span class="punctuation">:</span> <span class="number">5.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中景：李四小心翼翼地走向窗边查看&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;continuity_notes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;main_character&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;场景scene_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;main_action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四小心翼翼地走向窗边查看&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;fragment_count&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">9.0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;avg_duration&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;fragments_under_5s&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;fragments_split&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;split_ratio&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>视频分段时的连续性挑战</strong>：</p>
<blockquote>
<ol>
<li class="lvl-3">
<p><strong>动作中断</strong>：在动作中间切分导致视觉跳跃</p>
</li>
<li class="lvl-3">
<p><strong>状态不一致</strong>：片段边界状态不匹配</p>
</li>
<li class="lvl-3">
<p><strong>时空不连续</strong>：位置、服装、道具突然变化</p>
</li>
<li class="lvl-3">
<p><strong>情绪断裂</strong>：情绪变化不符合时间逻辑</p>
</li>
</ol>
<pre class="mermaid">> flowchart TD
    A[镜头序列] --> B[提取连续性信息]
    B --> C[分析动作完整性]
    C --> D[识别语义边界]
    D --> E[状态一致性检查]
    E --> F{是否需要切分?}
    F -->|是| G[寻找安全切分点]
    F -->|否| H[直接创建片段]
    G --> I[动态规划优化]
    I --> J[生成片段序列]
    H --> J
    J --> K[连续性验证]
    K --> L{通过验证?}
    L -->|是| M[输出最终片段]
    L -->|否| N[调整切分策略]
    N --> G
</pre>
<pre class="mermaid">> sequenceDiagram
    participant Splitter as 分段智能体
    participant Action as 动作保护器
    participant State as 状态检查器
    participant Boundary as 边界检测器
    participant Validator as 约束验证器
    
    Splitter->>Action: 检查镜头动作完整性
    Action-->>Splitter: 返回可切分点列表
    
    Splitter->>Boundary: 寻找语义边界
    Boundary-->>Splitter: 返回安全切分点
    
    Splitter->>State: 获取当前状态
    State-->>Splitter: 返回角色/场景状态
    
    Splitter->>Splitter: 动态规划计算最优切分
    
    Splitter->>Validator: 验证片段连续性
    Validator-->>Splitter: 返回验证结果
    
    alt 验证通过
        Splitter->>Splitter: 生成最终片段
    else 验证失败
        Splitter->>Splitter: 调整切分点重试
        Splitter->>Validator: 重新验证
    end
</pre>
</blockquote>
<h3 id="4-指令转换智能体">4.指令转换智能体</h3>
<p><strong>核心目标</strong>：将片段序列转换为高质量、模型特定的AI视频生成提示词</p>
<p><strong>技术栈</strong>：使用模板+LLM优化</p>
<pre class="mermaid">graph TD
    A[片段序列] --> B{选择AI模型}
    B --> C[Runway Gen-2]
    B --> D[Pika Labs]
    B --> E[其他模型]
    C --> F[加载模型模板]
    D --> F
    E --> F
    F --> G[LLM优化描述]
    G --> H[生成技术参数]
    H --> I[组装最终Prompt]
    I --> J[输出AI指令]</pre>
<p><strong>输出示例</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;generated_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-01-20T10:45:00Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mvp_1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;target_model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;project_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;深夜对话&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_fragments&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">9.0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;source_fragments&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;frag_001&quot;</span><span class="punctuation">,</span> <span class="string">&quot;frag_002&quot;</span><span class="punctuation">,</span> <span class="string">&quot;frag_003&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fragments&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三, 中景：张三紧张地环顾四周, cinematic style, dramatic lighting, high quality&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blurry, distorted, low quality, cartoonish, bad anatomy&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic, suspense&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_002&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三, 特写：张三低声询问, close-up shot, cinematic lighting, detailed facial expression&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blurry, distorted, low quality, cartoonish, bad anatomy&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">2.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;fragment_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;frag_003&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四, 中景：李四小心翼翼地走向窗边查看, cinematic style, suspenseful atmosphere&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;negative_prompt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blurry, distorted, low quality, cartoonish, bad anatomy&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span> <span class="number">4.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;runway_gen2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cinematic, suspense&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;requires_special_attention&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;global_settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;style_consistency&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;use_common_negative_prompt&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;execution_suggestions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;按顺序生成片段&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;保持相同种子值以获得一致性&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;生成后检查片段衔接&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="5-质量审查智能体">5.质量审查智能体</h3>
<p><strong>核心目标</strong>：确保整个流程的输出质量，检查连贯性、合规性和技术可行性</p>
<blockquote>
<ul class="lvl-1">
<li class="lvl-2">
<p>基础合规性检查</p>
</li>
<li class="lvl-2">
<p>只检查硬性规则</p>
</li>
</ul>
</blockquote>
<pre class="mermaid">flowchart TD
    A[AI指令序列] --> B[提取检查数据]
    B --> C[时长检查]
    B --> D[基本连续性检查]
    B --> E[技术参数检查]
    C --> F{所有片段≤5秒?}
    D --> G{角色服装一致?}
    E --> H{参数有效?}
    F -->|是| I[记录通过]
    F -->|否| J[记录失败]
    G -->|是| K[记录通过]
    G -->|否| L[记录警告]
    H -->|是| M[记录通过]
    H -->|否| N[记录失败]
    I --> O[汇总结果]
    J --> O
    K --> O
    L --> O
    M --> O
    N --> O
    O --> P{有失败项?}
    P -->|无| Q[状态: 通过]
    P -->|有| R[状态: 失败]
    Q --> S[生成报告]
    R --> S</pre>
<p><strong>输出示例</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;audited_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-01-20T10:50:00Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mvp_1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;auditor_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;basic&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;project_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;深夜对话&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;fragment_count&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">9.0</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;passed&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;checks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;片段时长限制检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;passed&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;所有片段时长符合要求&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;checked_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-01-20T10:50:01Z&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;提示词内容检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;passed&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;所有提示词非空&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;checked_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-01-20T10:50:01Z&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;提示词长度检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;passed&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;所有提示词长度合适&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;checked_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-01-20T10:50:01Z&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;片段数量检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;passed&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;共3个片段&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;checked_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-01-20T10:50:01Z&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;模型支持检查&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;passed&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;所有模型都受支持&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;checked_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-01-20T10:50:01Z&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;violations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;total_checks&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;passed_checks&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;warnings&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;errors&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;fragments_checked&quot;</span><span class="punctuation">:</span> <span class="number">3</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;suggestions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;检查所有片段时长是否≤5秒&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;确保没有空提示词&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;conclusion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;审查通过，可以开始视频生成&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="智能体实现细节">智能体实现细节</h2>
<h3 id="LLM-客户端">LLM 客户端</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>OpenAI</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ChatOpenAI(</span><br><span class="line">    model=<span class="variable language_">self</span>.config.model,</span><br><span class="line">    temperature=<span class="variable language_">self</span>.config.temperature,</span><br><span class="line">    api_key=<span class="variable language_">self</span>.config.api_key,</span><br><span class="line">    base_url=<span class="variable language_">self</span>.base_url,</span><br><span class="line">    max_retries=<span class="number">3</span>,</span><br><span class="line">    max_tokens=<span class="variable language_">self</span>.config.max_tokens,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Embeddings</span></span><br><span class="line">OpenAIEmbeddings(</span><br><span class="line">    model=<span class="variable language_">self</span>.config.model,</span><br><span class="line">    api_key=<span class="variable language_">self</span>.config.api_key,</span><br><span class="line">    base_url=<span class="variable language_">self</span>.base_url</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p><strong>Ollama</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ChatOllama(</span><br><span class="line">    base_url=<span class="variable language_">self</span>.base_url,</span><br><span class="line">    model=<span class="variable language_">self</span>.config.model,</span><br><span class="line">    temperature=<span class="variable language_">self</span>.config.temperature,</span><br><span class="line">    num_predict=<span class="variable language_">self</span>.config.max_tokens * <span class="number">4</span>,</span><br><span class="line">    keep_alive=<span class="variable language_">self</span>.config.timeout * <span class="number">5</span>,</span><br><span class="line">    num_thread=<span class="number">8</span>,</span><br><span class="line">    client_kwargs=<span class="variable language_">self</span>._get_model_kwargs(),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Embeddings</span></span><br><span class="line">OllamaEmbeddings(</span><br><span class="line">    model=<span class="variable language_">self</span>.config.model,</span><br><span class="line">    base_url=<span class="variable language_">self</span>.base_url</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p><strong>QWen</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ChatTongyi(</span><br><span class="line">    model=<span class="variable language_">self</span>.config.model,</span><br><span class="line">    model_kwargs=<span class="variable language_">self</span>._get_model_kwargs(),</span><br><span class="line">    api_key=<span class="variable language_">self</span>.config.api_key,</span><br><span class="line">    max_retries=<span class="number">3</span>,</span><br><span class="line">    streaming=<span class="literal">False</span>,</span><br><span class="line">)</span><br><span class="line"><span class="comment"># Embeddings</span></span><br><span class="line">DashScopeEmbeddings(</span><br><span class="line">    model=<span class="variable language_">self</span>.config.model,</span><br><span class="line">    dashscope_api_key=<span class="variable language_">self</span>.config.api_key</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="提示词管理">提示词管理</h3>
<p>LLM 提示词管理</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">_call_llm_chat_with_retry</span>(<span class="params">self, llm, system_prompt: <span class="built_in">str</span>, user_prompt, max_retries: <span class="built_in">int</span> = <span class="number">3</span></span>) -&gt; <span class="built_in">str</span> | <span class="literal">None</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        调用LLM，直接返回json字符串（支持重试）</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    messages = [</span><br><span class="line">        &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>, <span class="string">&quot;content&quot;</span>: system_prompt&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: user_prompt&#125;</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> attempt <span class="keyword">in</span> <span class="built_in">range</span>(max_retries):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">        	response = llm.invoke(_convert_messages(messages))</span><br><span class="line">    		<span class="keyword">return</span> response.content</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">if</span> attempt == max_retries - <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">raise</span> Exception(<span class="string">f&quot;LLM调用失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            time.sleep(<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_convert_messages</span>(<span class="params">messages: <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="built_in">str</span>]]</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Convert dict messages to LangChain message objects&quot;&quot;&quot;</span></span><br><span class="line">    lc_messages = []</span><br><span class="line">    <span class="keyword">for</span> msg <span class="keyword">in</span> messages:</span><br><span class="line">        role = msg[<span class="string">&quot;role&quot;</span>]</span><br><span class="line">        content = msg[<span class="string">&quot;content&quot;</span>]</span><br><span class="line">        <span class="keyword">if</span> role == <span class="string">&quot;system&quot;</span>:</span><br><span class="line">            lc_messages.append(SystemMessage(content=content))</span><br><span class="line">        <span class="keyword">elif</span> role == <span class="string">&quot;user&quot;</span>:</span><br><span class="line">            lc_messages.append(HumanMessage(content=content))</span><br><span class="line">        <span class="keyword">elif</span> role == <span class="string">&quot;assistant&quot;</span>:</span><br><span class="line">            <span class="comment"># lc_messages.append(AIMessage(content=content, additional_kwargs=&#123;&quot;tool_calls&quot;: []&#125;))</span></span><br><span class="line">            lc_messages.append(AIMessage(content=content))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">f&quot;Unsupported role: <span class="subst">&#123;role&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> lc_messages</span><br></pre></td></tr></table></figure>
<h3 id="流程编排（LangGraph）">流程编排（LangGraph）</h3>
<p>多智能体协作流程，负责协调各个智能体完成端到端的分镜生成</p>
<pre class="mermaid">graph TD
    Start[开始/剧本输入] --> Parse[剧本解析]
    
    Parse --> Decision1{解析结果判断}
    Decision1 -->|成功| Split[镜头拆分]
    Decision1 -->|严重失败| Error[错误处理]
    Decision1 -->|需要人工干预| Human[人工干预]
    
    Split --> Decision2{拆分结果判断}
    Decision2 -->|成功| Fragment[视频分段]
    Decision2 -->|需要重试| Split
    Decision2 -->|严重失败| Error
    
    Fragment --> Decision3{分段结果判断}
    Decision3 -->|成功| Prompt[提示词生成]
    Decision3 -->|需要调整| Split
    Decision3 -->|需要修复| Split
    Decision3 -->|严重失败| Error
    
    Prompt --> DecisionP{生成结果判断}
    DecisionP -->|通过| Audit[质量审查]
    DecisionP -->|严重失败| Error
    
    Audit --> Decision4{审查结果判断}
    Decision4 -->|通过| Continuity[连续性检查]
    Decision4 -->|需要调整| Prompt
    Decision4 -->|需要修复| Fragment
    Decision4 -->|需要重试| Prompt
    Decision4 -->|需要人工干预| Human
    Decision4 -->|失败| Error
    
    Continuity --> Decision5{连续性判断}
    Decision5 -->|通过| Output[生成输出]
    Decision5 -->|需要调整| Prompt
    Decision5 -->|需要修复| Fragment
    Decision5 -->|需要优化| Prompt
    Decision5 -->|需要人工干预| Human
    Decision5 -->|严重失败| Error
    
    Output --> End[工作流完成]
    
    Error --> DecisionE{错误处理判断}
    DecisionE -->|可恢复| Parse
    DecisionE -->|需要人工干预| Human
    DecisionE -->|中止流程| End
    
    Human --> DecisionH{人工决策判断}
    DecisionH -->|继续流程| Output
    DecisionH -->|重新开始| Parse
    DecisionH -->|调整提示词| Prompt
    DecisionH -->|修复片段| Fragment
    DecisionH -->|继续人工干预| Human
    DecisionH -->|中止流程| End
    
    %% 样式定义
    style Start fill:#4CAF50,color:white
    style End fill:#F44336,color:white
    style Human fill:#FF9800,color:black
    style Error fill:#9E9E9E,color:white
    style Parse fill:#2196F3,color:white
    style Split fill:#2196F3,color:white
    style Fragment fill:#2196F3,color:white
    style Prompt fill:#2196F3,color:white
    style Audit fill:#2196F3,color:white
    style Continuity fill:#2196F3,color:white
    style Output fill:#4CAF50,color:white
    
    %% 决策节点样式
    style Decision1 fill:#FFEB3B,color:black
    style Decision2 fill:#FFEB3B,color:black
    style Decision3 fill:#FFEB3B,color:black
    style DecisionP fill:#FFEB3B,color:black
    style Decision4 fill:#FFEB3B,color:black
    style Decision5 fill:#FFEB3B,color:black
    style DecisionE fill:#FFEB3B,color:black
    style DecisionH fill:#FFEB3B,color:black
    
    %% 主流程线
    linkStyle 0,1,5,9,13,17,21,25 stroke:#2196F3,stroke-width:2px
    %% 错误处理线
    linkStyle 2,6,10,14,18,22,26 stroke:#9E9E9E,stroke-width:1.5px
    %% 人工干预线
    linkStyle 3,15,19,23,27 stroke:#FF9800,stroke-width:1.5px
    %% 修复/重试线
    linkStyle 4,7,8,11,12,16,20,24 stroke:#FF5722,stroke-width:1.5px</pre>
<h3 id="LangChain-工具集">LangChain 工具集</h3>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://pengline.github.io">余一叶知秋尽</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://pengline.github.io/2025/10/0194020a663c408fb500dd7532349519/">https://pengline.github.io/2025/10/0194020a663c408fb500dd7532349519/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://pengline.github.io" target="_blank">余一叶知秋尽</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/LangGraph%E6%B5%81%E7%A8%8B%E7%BC%96%E6%8E%92/">LangGraph流程编排</a><a class="post-meta__tags" href="/tags/%E9%95%BF%E5%89%A7%E6%9C%AC%E6%8B%86%E5%88%86/">长剧本拆分</a><a class="post-meta__tags" href="/tags/%E9%95%BF%E5%89%A7%E6%9C%AC%E5%88%86%E9%95%9C/">长剧本分镜</a><a class="post-meta__tags" href="/tags/%E9%95%BF%E5%89%A7%E6%9C%AC%E8%A7%86%E9%A2%91%E7%94%9F%E6%88%90/">长剧本视频生成</a></div><div class="post-share"><div class="social-share" data-image="/img/essay/1755143991957175514399123.webp" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/11/0c17e5dc04ae4994b411db081a7c82d6/" title="LangChain 框架功能详解和使用案例"><img class="cover" src= "/img/20241215205335173426721579192.webp" data-lazy-src="/img/essay/small102614pbz4m1758680774.webp" onerror="onerror=null;src='/img/k3zssqvjw2d.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">LangChain 框架功能详解和使用案例</div></div><div class="info-2"><div class="info-item-1">开源框架 LangChain，旨在简化基于大语言模型构建应用程序的过程。集成了记忆机制、工具调用和智能决策等。</div></div></div></a><a class="pagination-related" href="/2025/10/1332727d5b8a4fdc9cfbfd3661f009d4/" title="AI 模型的多种轻量化压缩技术"><img class="cover" src= "/img/20241215205335173426721579192.webp" data-lazy-src="/img/essay/small202824LQTsk1760099304.webp" onerror="onerror=null;src='/img/k3zssqvjw2d.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">AI 模型的多种轻量化压缩技术</div></div><div class="info-2"><div class="info-item-1">模型轻量化不是单一技术，而是组合策略（轻量结构设计 → 知识蒸馏 → 结构化剪枝 → 量化感知训练 → 硬件部署）。</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2026/01/238b779a48294b85b77d8aed05eb31da/" title="如何利用 AIGC 技术生成超长视频"><img class="cover" src= "/img/20241215205335173426721579192.webp" data-lazy-src="/img/essay/small194032xRveA1759578032.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-27</div><div class="info-item-2">如何利用 AIGC 技术生成超长视频</div></div><div class="info-2"><div class="info-item-1">利用大语言模型+ 多模态模型将一段超长剧本转化为视频，主要有"一站式全自动生成"和"专业级分步制作"两种主流模式。</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%A7%E6%9C%AC%E5%88%86%E9%95%9C%E6%99%BA%E8%83%BD%E4%BD%93%EF%BC%88V1-x%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">剧本分镜智能体（V1.x）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span class="toc-number">1.1.</span> <span class="toc-text">设计原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E7%9B%AE%E6%A0%87"><span class="toc-number">1.2.</span> <span class="toc-text">核心目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.3.</span> <span class="toc-text">使用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA"><span class="toc-number">1.4.</span> <span class="toc-text">输入输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E6%88%90%E6%96%B9%E5%BC%8F"><span class="toc-number">1.5.</span> <span class="toc-text">集成方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%EF%BC%88%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">技术架构（多智能体）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%89%A7%E6%9C%AC%E8%A7%A3%E6%9E%90%E6%99%BA%E8%83%BD%E4%BD%93"><span class="toc-number">2.1.</span> <span class="toc-text">1.剧本解析智能体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%95%9C%E5%A4%B4%E6%8B%86%E5%88%86%E6%99%BA%E8%83%BD%E4%BD%93"><span class="toc-number">2.2.</span> <span class="toc-text">2.镜头拆分智能体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%A7%86%E9%A2%91%E5%88%86%E6%AE%B5%E6%99%BA%E8%83%BD%E4%BD%93"><span class="toc-number">2.3.</span> <span class="toc-text">3.视频分段智能体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%8C%87%E4%BB%A4%E8%BD%AC%E6%8D%A2%E6%99%BA%E8%83%BD%E4%BD%93"><span class="toc-number">2.4.</span> <span class="toc-text">4.指令转换智能体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%B4%A8%E9%87%8F%E5%AE%A1%E6%9F%A5%E6%99%BA%E8%83%BD%E4%BD%93"><span class="toc-number">2.5.</span> <span class="toc-text">5.质量审查智能体</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%99%BA%E8%83%BD%E4%BD%93%E5%AE%9E%E7%8E%B0%E7%BB%86%E8%8A%82"><span class="toc-number">3.</span> <span class="toc-text">智能体实现细节</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#LLM-%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">3.1.</span> <span class="toc-text">LLM 客户端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E7%A4%BA%E8%AF%8D%E7%AE%A1%E7%90%86"><span class="toc-number">3.2.</span> <span class="toc-text">提示词管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E7%BC%96%E6%8E%92%EF%BC%88LangGraph%EF%BC%89"><span class="toc-number">3.3.</span> <span class="toc-text">流程编排（LangGraph）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LangChain-%E5%B7%A5%E5%85%B7%E9%9B%86"><span class="toc-number">3.4.</span> <span class="toc-text">LangChain 工具集</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By 余一叶知秋尽</span><span class="framework-info"><span>框架 </span><a href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.3</a></span></div><div class="footer_custom_text"><p><a style="margin-inline:5px"target="_blank"href="https://github.com/"><img src= "/img/20241215205335173426721579192.webp" data-lazy-src="https://img.shields.io/badge/Hosted-Github-brightgreen?style=flat&logo=GitHub"title="本站项目由Gtihub托管"></a><a style="margin-inline:5px"target="_blank"href="https://hexo.io/"><img src= "/img/20241215205335173426721579192.webp" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo"title="博客框架为Hexo"></a><a style="margin-inline:5px"target="_blank"href="https://butterfly.js.org/"><img src= "/img/20241215205335173426721579192.webp" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?logoColor=white&style=flat&logo=buefy"title="主题采用butterfly"></a><a style="margin-inline:5px"target="_blank"href="https://giscus.app/zh-CN/"><img src= "/img/20241215205335173426721579192.webp" data-lazy-src="https://img.shields.io/badge/Comment-Giscus-2873df?logoColor=white&style=flat&logo=git"title="评论系统为Giscus"></a><a style="margin-inline:5px"target="_blank"href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src= "/img/20241215205335173426721579192.webp" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris"title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div><script src="https://unpkg.com/mermaid@11.5.0/dist/mermaid.min.js"></script><script>if (window.mermaid) {
  mermaid.initialize({
    startOnLoad: true,
    theme: '[object Object]',
    securityLevel: 'loose',
    flowchart: { useMaxWidth: true, htmlLabels: true }
  });
}</script></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="日间和夜间模式切换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const createScriptElement = config => {
    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => {
      ele.setAttribute(key, value)
    })
    return ele
  }

  const loadGiscus = (el = document, key) => {
    const mappingConfig = isShuoshuo
      ? { 'data-mapping': 'specific', 'data-term': key }
      : { 'data-mapping': (option && option['data-mapping']) || 'pathname' }

    const giscusConfig = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'pengline/pengline.github.io',
      'data-repo-id': 'R_kgDOPqG50w',
      'data-category-id': 'DIC_kwDOPqG5084Cu_K9',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      'data-lang': 'zh-CN',
      'data-input-position': 'top',
      async: true,
      ...option,
      ...mappingConfig
    }

    const scriptElement = createScriptElement(giscusConfig)

    el.querySelector('#giscus-wrap').appendChild(scriptElement)

    if (isShuoshuo) {
      window.shuoshuoComment.destroyGiscus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme),
            lang: 'zh-CN'
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.app')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if (isShuoshuo) {
    'Giscus' === 'Giscus'
      ? window.shuoshuoComment = { loadComment: loadGiscus }
      : window.loadOtherComment = loadGiscus
    return
  }

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script></div><script src="/js/custom/sun_moon.js" async></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>